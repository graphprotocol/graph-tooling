var Co=Object.defineProperty;var No=(e,t,n)=>t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var h=(e,t,n)=>(No(e,typeof t!="symbol"?t+"":t,n),n),$a=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Oe=(e,t,n)=>($a(e,t,"read from private field"),n?n.call(e):t.get(e)),zt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ft=(e,t,n,r)=>($a(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{B as It,C as Oo,a as Ro,g as $s,U as Cs,T as Bo,h as Ns,f as Nn,n as rr,b as Do,c as de,d as jo,p as Uo,e as Mo,s as Lo,i as Qr,j as Os,k as Rs,l as bn,m as zo,o as Fo,q as Vo,t as Zo,r as Go,A as qo,u as Bs,v as Ho,I as Wo,w as _r,x as Ko,y as Jo,z as Qo,D as Xo,E as Ds,F as Yo,G as ec,H as tc,J as nc,K as rc,L as ac,M as sc,N as ic,O as js,P as oc,Q as cc,R as uc,S as Us,V as dc,W as lc,X as fc,Y as hc,Z as ar,_ as pc,$ as L,a0 as wt,a1 as ne,a2 as yc,a3 as mc,a4 as gc,a5 as wc,a6 as bc,a7 as vc,a8 as Ca}from"./index-DfAx-aqI.js";import{d as be}from"./browser-CleyAMPC.js";class _c extends It{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:t,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}function xc({chain:e,currentChainId:t}){if(!e)throw new Oo;if(t!==e.id)throw new Ro({chain:e,currentChainId:t})}function Ec(e,{docsPath:t,...n}){const r=(()=>{const a=$s(e,n);return a instanceof Cs?e:a})();return new Bo(r,{docsPath:t,...n})}async function Ms(e){const t=await e.request({method:"eth_chainId"});return Ns(t)}class Tc extends It{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class Xr extends It{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class Sc extends It{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Nn(t)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class kc extends It{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}async function Rn(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:a}={}){var l,f,_;const s=r??"latest",i=a??!1,o=n!==void 0?rr(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,i]}):c=await e.request({method:"eth_getBlockByNumber",params:[o||s,i]}),!c)throw new kc({blockHash:t,blockNumber:n});return(((_=(f=(l=e.chain)==null?void 0:l.formatters)==null?void 0:f.block)==null?void 0:_.format)||Do)(c)}async function Ls(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Pc(e,t){var s,i,o;const{block:n,chain:r=e.chain,request:a}=t||{};if(typeof((s=r==null?void 0:r.fees)==null?void 0:s.defaultPriorityFee)=="function"){const c=n||await de(e,Rn,"getBlock")({});return r.fees.defaultPriorityFee({block:c,client:e,request:a})}if(typeof((i=r==null?void 0:r.fees)==null?void 0:i.defaultPriorityFee)<"u")return(o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee;try{const c=await e.request({method:"eth_maxPriorityFeePerGas"});return jo(c)}catch{const[c,u]=await Promise.all([n?Promise.resolve(n):de(e,Rn,"getBlock")({}),de(e,Ls,"getGasPrice")({})]);if(typeof c.baseFeePerGas!="bigint")throw new Xr;const l=u-c.baseFeePerGas;return l<0n?0n:l}}async function Na(e,t){var _,g;const{block:n,chain:r=e.chain,request:a,type:s="eip1559"}=t||{},i=await(async()=>{var b,S;return typeof((b=r==null?void 0:r.fees)==null?void 0:b.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:a}):((S=r==null?void 0:r.fees)==null?void 0:S.baseFeeMultiplier)??1.2})();if(i<1)throw new Tc;const c=10**(((_=i.toString().split(".")[1])==null?void 0:_.length)??0),u=b=>b*BigInt(Math.ceil(i*c))/BigInt(c),l=n||await de(e,Rn,"getBlock")({});if(typeof((g=r==null?void 0:r.fees)==null?void 0:g.estimateFeesPerGas)=="function"){const b=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:a,type:s});if(b!==null)return b}if(s==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Xr;const b=typeof(a==null?void 0:a.maxPriorityFeePerGas)=="bigint"?a.maxPriorityFeePerGas:await Pc(e,{block:l,chain:r,request:a}),S=u(l.baseFeePerGas);return{maxFeePerGas:(a==null?void 0:a.maxFeePerGas)??S+b,maxPriorityFeePerGas:b}}return{gasPrice:(a==null?void 0:a.gasPrice)??u(await de(e,Ls,"getGasPrice")({}))}}class Ac extends It{constructor(t,{account:n,docsPath:r,chain:a,data:s,gas:i,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:_}){var b;const g=Uo({from:n==null?void 0:n.address,to:f,value:typeof _<"u"&&`${Mo(_)} ${((b=a==null?void 0:a.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:s,gas:i,gasPrice:typeof o<"u"&&`${Nn(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${Nn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Nn(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",g].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=t}}function Ic(e,{docsPath:t,...n}){const r=(()=>{const a=$s(e,n);return a instanceof Cs?e:a})();return new Ac(r,{docsPath:t,...n})}async function $c(e,t){var a,s,i;const n=t.account??e.account,r=n?bn(n):void 0;try{const{accessList:o,blobs:c,blobVersionedHashes:u,blockNumber:l,blockTag:f,data:_,gas:g,gasPrice:b,maxFeePerBlobGas:S,maxFeePerGas:I,maxPriorityFeePerGas:B,nonce:R,to:z,value:M,stateOverride:$,...N}=await Fs(e,{...t,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),W=(l?rr(l):void 0)||f,K=Lo($);Qr(t);const Z=(i=(s=(a=e.chain)==null?void 0:a.formatters)==null?void 0:s.transactionRequest)==null?void 0:i.format,Me=(Z||Os)({...Rs(N,{format:Z}),from:r==null?void 0:r.address,accessList:o,blobs:c,blobVersionedHashes:u,data:_,gas:g,gasPrice:b,maxFeePerBlobGas:S,maxFeePerGas:I,maxPriorityFeePerGas:B,nonce:R,to:z,value:M}),lt=await e.request({method:"eth_estimateGas",params:K?[Me,W??"latest",K]:W?[Me,W]:[Me]});return BigInt(lt)}catch(o){throw Ic(o,{...t,account:r,chain:e.chain})}}async function Cc(e,{address:t,blockTag:n="latest",blockNumber:r}){const a=await e.request({method:"eth_getTransactionCount",params:[t,r?rr(r):n]});return Ns(a)}const zs=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function Fs(e,t){const{account:n=e.account,blobs:r,chain:a,chainId:s,gas:i,kzg:o,nonce:c,parameters:u=zs,type:l}=t,f=n?bn(n):void 0,_={...t,...f?{from:f==null?void 0:f.address}:{}};let g;async function b(){return g||(g=await de(e,Rn,"getBlock")({blockTag:"latest"}),g)}if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const S=zo({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const I=Fo({commitments:S,to:"hex"});_.blobVersionedHashes=I}if(u.includes("sidecars")){const I=Vo({blobs:r,commitments:S,kzg:o}),B=Zo({blobs:r,commitments:S,proofs:I,to:"hex"});_.sidecars=B}}if(u.includes("chainId")&&(a?_.chainId=a.id:typeof s<"u"?_.chainId=s:_.chainId=await de(e,Ms,"getChainId")({})),u.includes("nonce")&&typeof c>"u"&&f&&(_.nonce=await de(e,Cc,"getTransactionCount")({address:f.address,blockTag:"pending"})),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{_.type=Go(_)}catch{const S=await b();_.type=typeof(S==null?void 0:S.baseFeePerGas)=="bigint"?"eip1559":"legacy"}if(u.includes("fees"))if(_.type!=="legacy"&&_.type!=="eip2930"){if(typeof _.maxFeePerGas>"u"||typeof _.maxPriorityFeePerGas>"u"){const S=await b(),{maxFeePerGas:I,maxPriorityFeePerGas:B}=await Na(e,{block:S,chain:a,request:_});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<B)throw new Sc({maxPriorityFeePerGas:B});_.maxPriorityFeePerGas=B,_.maxFeePerGas=I}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Xr;const S=await b(),{gasPrice:I}=await Na(e,{block:S,chain:a,request:_,type:"legacy"});_.gasPrice=I}return u.includes("gas")&&typeof i>"u"&&(_.gas=await de(e,$c,"estimateGas")({..._,account:f?{address:f.address,type:"json-rpc"}:void 0})),Qr(_),delete _.parameters,_}async function Nc(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}async function Oc(e,t){var B,R,z,M;const{account:n=e.account,chain:r=e.chain,accessList:a,blobs:s,data:i,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:_,to:g,value:b,...S}=t;if(!n)throw new _c({docsPath:"/docs/actions/wallet/sendTransaction"});const I=bn(n);try{Qr(t);let $;if(r!==null&&($=await de(e,Ms,"getChainId")({}),xc({currentChainId:$,chain:r})),I.type==="local"){const K=await de(e,Fs,"prepareTransactionRequest")({account:I,accessList:a,blobs:s,chain:r,chainId:$,data:i,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:_,parameters:[...zs,"sidecars"],to:g,value:b,...S}),Z=(B=r==null?void 0:r.serializers)==null?void 0:B.transaction,Ne=await I.signTransaction(K,{serializer:Z});return await de(e,Nc,"sendRawTransaction")({serializedTransaction:Ne})}const N=(M=(z=(R=e.chain)==null?void 0:R.formatters)==null?void 0:z.transactionRequest)==null?void 0:M.format,W=(N||Os)({...Rs(S,{format:N}),accessList:a,blobs:s,data:i,from:I.address,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:_,to:g,value:b});return await e.request({method:"eth_sendTransaction",params:[W]},{retryCount:0})}catch($){throw Ec($,{...t,account:I,chain:t.chain||void 0})}}const Rc=/^(.*)\[([0-9]*)\]$/,Bc=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Dc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Oa(e,t){if(e.length!==t.length)throw new qo({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const a=e[r],s=t[r];n.push(Vs(a,s))}return Bs(n)}function Vs(e,t,n=!1){if(e==="address"){const i=t;if(!Ho(i))throw new Wo({address:i});return _r(i.toLowerCase(),{size:n?32:null})}if(e==="string")return Ko(t);if(e==="bytes")return t;if(e==="bool")return _r(Jo(t),{size:n?32:1});const r=e.match(Dc);if(r){const[i,o,c="256"]=r,u=Number.parseInt(c)/8;return rr(t,{size:n?32:u,signed:o==="int"})}const a=e.match(Bc);if(a){const[i,o]=a;if(Number.parseInt(o)!==(t.length-2)/2)throw new Qo({expectedSize:Number.parseInt(o),givenSize:(t.length-2)/2});return _r(t,{dir:"right",size:n?32:null})}const s=e.match(Rc);if(s&&Array.isArray(t)){const[i,o]=s,c=[];for(let u=0;u<t.length;u++)c.push(Vs(o,t[u],!0));return c.length===0?"0x":Bs(c)}throw new Xo(e)}async function jc(e,t){const{abi:n,address:r,args:a,dataSuffix:s,functionName:i,...o}=t,c=o.account?bn(o.account):e.account,u=Ds({abi:n,args:a,functionName:i});try{const{data:l}=await de(e,Yo,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:r,...o,account:c}),f=ec({abi:n,args:a,functionName:i,data:l||"0x"}),_=n.filter(g=>"name"in g&&g.name===t.functionName);return{result:f,request:{abi:_,address:r,args:a,dataSuffix:s,functionName:i,...o,account:c}}}catch(l){throw tc(l,{abi:n,address:r,args:a,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c==null?void 0:c.address})}}async function Uc(e,t){const{abi:n,address:r,args:a,dataSuffix:s,functionName:i,...o}=t,c=Ds({abi:n,args:a,functionName:i});return de(e,Oc,"sendTransaction")({data:`${c}${s?s.replace("0x",""):""}`,to:r,...o})}function Mc(e,t={}){const{key:n="custom",name:r="Custom Provider",retryDelay:a}=t;return({retryCount:s})=>nc({key:n,name:r,request:e.request.bind(e),retryCount:t.retryCount??s,retryDelay:a,type:"custom"})}async function Zs(e,t={}){let n;if(t.connector){const{connector:c}=t,[u,l]=await Promise.all([c.getAccounts(),c.getChainId()]);n={accounts:u,chainId:l,connector:c}}else n=e.state.connections.get(e.state.current);if(!n)throw new rc;const r=t.chainId??n.chainId,a=n.connector;if(a.getClient)return a.getClient({chainId:r});const s=bn(t.account??n.accounts[0]);s.address=ac(s.address);const i=e.chains.find(c=>c.id===r),o=await n.connector.getProvider({chainId:r});if(t.account&&!n.accounts.some(c=>c.toLowerCase()===s.address.toLowerCase()))throw new sc({address:s.address,connector:a});return ic({account:s,chain:i,name:"Connector Client",transport:c=>Mc(o)({...c,retryCount:0})})}async function Lc(e,t){const{abi:n,chainId:r,connector:a,...s}=t;let i;t.account?i=t.account:i=(await Zs(e,{chainId:r,connector:a})).account;const o=e.getClient({chainId:r}),c=js(o,jc,"simulateContract"),{result:u,request:l}=await c({...s,abi:n,account:i});return{chainId:o.chain.id,result:u,request:{__mode:"prepared",...l,chainId:r}}}async function zc(e,t){const{account:n,chainId:r,connector:a,__mode:s,...i}=t;let o;typeof n=="object"&&n.type==="local"?o=e.getClient({chainId:r}):o=await Zs(e,{account:n,chainId:r,connector:a});const{connector:c}=oc(e);let u;if(s==="prepared"||c!=null&&c.supportsSimulation)u=i;else{const{request:_}=await Lc(e,{...i,account:n,chainId:r});u=_}return await js(o,Uc,"writeContract")({...u,...n?{account:n}:{},chain:r?{id:r}:null})}function Fc(e,t={}){return{async queryFn({queryKey:n}){const r=t.abi;if(!r)throw new Error("abi is required");const{address:a,functionName:s,scopeKey:i,...o}=n[1];if(!a)throw new Error("address is required");if(!s)throw new Error("functionName is required");const c=o.args;return cc(e,{abi:r,address:a,functionName:s,args:c,...o})},queryKey:Vc(t)}}function Vc(e={}){const{abi:t,...n}=e;return["readContract",uc(n)]}function Zc(e){return{mutationFn(t){return zc(e,t)},mutationKey:["writeContract"]}}function Gc(e={}){const{abi:t,address:n,functionName:r,query:a={}}=e,s=Us(e),i=dc({config:s}),o=Fc(s,{...e,chainId:e.chainId??i}),c=!!(n&&t&&r&&(a.enabled??!0));return lc({...a,...o,enabled:c,structuralSharing:a.structuralSharing??fc})}function qc(e={}){const{mutation:t}=e,n=Us(e),r=Zc(n),{mutate:a,mutateAsync:s,...i}=hc({...t,...r});return{...i,writeContract:a,writeContractAsync:s}}function Hc(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var a=e.charAt(r),s=a.charCodeAt(0);if(t[s]!==255)throw new TypeError(a+" is ambiguous");t[s]=r}var i=e.length,o=e.charAt(0),c=Math.log(i)/Math.log(256),u=Math.log(256)/Math.log(i);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var b=0,S=0,I=0,B=g.length;I!==B&&g[I]===0;)I++,b++;for(var R=(B-I)*u+1>>>0,z=new Uint8Array(R);I!==B;){for(var M=g[I],$=0,N=R-1;(M!==0||$<S)&&N!==-1;N--,$++)M+=256*z[N]>>>0,z[N]=M%i>>>0,M=M/i>>>0;if(M!==0)throw new Error("Non-zero carry");S=$,I++}for(var C=R-S;C!==R&&z[C]===0;)C++;for(var W=o.repeat(b);C<R;++C)W+=e.charAt(z[C]);return W}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var b=0,S=0,I=0;g[b]===o;)S++,b++;for(var B=(g.length-b)*c+1>>>0,R=new Uint8Array(B);g[b];){var z=t[g.charCodeAt(b)];if(z===255)return;for(var M=0,$=B-1;(z!==0||M<I)&&$!==-1;$--,M++)z+=i*R[$]>>>0,R[$]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");I=M,b++}for(var N=B-I;N!==B&&R[N]===0;)N++;for(var C=new Uint8Array(S+(B-N)),W=S;N!==B;)C[W++]=R[N++];return C}function _(g){var b=f(g);if(b)return b;throw new Error("Non-base"+i+" character")}return{encode:l,decodeUnsafe:f,decode:_}}var Wc=Hc;const Kc=ar(Wc),Jc=Symbol.for("@libp2p/peer-id");class Ze extends Error{constructor(n,r,a){super(n);h(this,"code");h(this,"props");this.code=r,this.name=(a==null?void 0:a.name)??"CodeError",this.props=a??{}}}function Qc(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function $t(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Xc(e){return new TextEncoder().encode(e)}function Yc(e){return new TextDecoder().decode(e)}function eu(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var a=0;a<e.length;a++){var s=e.charAt(a),i=s.charCodeAt(0);if(n[i]!==255)throw new TypeError(s+" is ambiguous");n[i]=a}var o=e.length,c=e.charAt(0),u=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var S=0,I=0,B=0,R=b.length;B!==R&&b[B]===0;)B++,S++;for(var z=(R-B)*l+1>>>0,M=new Uint8Array(z);B!==R;){for(var $=b[B],N=0,C=z-1;($!==0||N<I)&&C!==-1;C--,N++)$+=256*M[C]>>>0,M[C]=$%o>>>0,$=$/o>>>0;if($!==0)throw new Error("Non-zero carry");I=N,B++}for(var W=z-I;W!==z&&M[W]===0;)W++;for(var K=c.repeat(S);W<z;++W)K+=e.charAt(M[W]);return K}function _(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var S=0;if(b[S]!==" "){for(var I=0,B=0;b[S]===c;)I++,S++;for(var R=(b.length-S)*u+1>>>0,z=new Uint8Array(R);b[S];){var M=n[b.charCodeAt(S)];if(M===255)return;for(var $=0,N=R-1;(M!==0||$<B)&&N!==-1;N--,$++)M+=o*z[N]>>>0,z[N]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");B=$,S++}if(b[S]!==" "){for(var C=R-B;C!==R&&z[C]===0;)C++;for(var W=new Uint8Array(I+(R-C)),K=I;C!==R;)W[K++]=z[C++];return W}}}function g(b){var S=_(b);if(S)return S;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:_,decode:g}}var tu=eu,nu=tu;class ru{constructor(t,n,r){h(this,"name");h(this,"prefix");h(this,"baseEncode");this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class au{constructor(t,n,r){h(this,"name");h(this,"prefix");h(this,"baseDecode");h(this,"prefixCodePoint");if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Gs(this,t)}}class su{constructor(t){h(this,"decoders");this.decoders=t}or(t){return Gs(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r!=null)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Gs(e,t){return new su({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class iu{constructor(t,n,r,a){h(this,"name");h(this,"prefix");h(this,"baseEncode");h(this,"baseDecode");h(this,"encoder");h(this,"decoder");this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=a,this.encoder=new ru(t,n,r),this.decoder=new au(t,n,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function sr({name:e,prefix:t,encode:n,decode:r}){return new iu(e,t,n,r)}function vn({name:e,prefix:t,alphabet:n}){const{encode:r,decode:a}=nu(n,e);return sr({prefix:t,name:e,encode:r,decode:s=>$t(a(s))})}function ou(e,t,n,r){const a={};for(let l=0;l<t.length;++l)a[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const i=new Uint8Array(s*n/8|0);let o=0,c=0,u=0;for(let l=0;l<s;++l){const f=a[e[l]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|f,o+=n,o>=8&&(o-=8,i[u++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return i}function cu(e,t,n){const r=t[t.length-1]==="=",a=(1<<n)-1;let s="",i=0,o=0;for(let c=0;c<e.length;++c)for(o=o<<8|e[c],i+=8;i>n;)i-=n,s+=t[a&o>>i];if(i!==0&&(s+=t[a&o<<n-i]),r)for(;s.length*n&7;)s+="=";return s}function ee({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return sr({prefix:t,name:e,encode(a){return cu(a,r,n)},decode(a){return ou(a,r,n,e)}})}const ue=vn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),uu=vn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),du=Object.freeze(Object.defineProperty({__proto__:null,base58btc:ue,base58flickr:uu},Symbol.toStringTag,{value:"Module"})),Ge=ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),lu=ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fu=ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hu=ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pu=ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yu=ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mu=ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gu=ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wu=ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bu=Object.freeze(Object.defineProperty({__proto__:null,base32:Ge,base32hex:pu,base32hexpad:mu,base32hexpadupper:gu,base32hexupper:yu,base32pad:fu,base32padupper:hu,base32upper:lu,base32z:wu},Symbol.toStringTag,{value:"Module"}));var vu=qs,Ra=128,_u=127,xu=~_u,Eu=Math.pow(2,31);function qs(e,t,n){t=t||[],n=n||0;for(var r=n;e>=Eu;)t[n++]=e&255|Ra,e/=128;for(;e&xu;)t[n++]=e&255|Ra,e>>>=7;return t[n]=e|0,qs.bytes=n-r+1,t}var Tu=Cr,Su=128,Ba=127;function Cr(e,r){var n=0,r=r||0,a=0,s=r,i,o=e.length;do{if(s>=o)throw Cr.bytes=0,new RangeError("Could not decode varint");i=e[s++],n+=a<28?(i&Ba)<<a:(i&Ba)*Math.pow(2,a),a+=7}while(i>=Su);return Cr.bytes=s-r,n}var ku=Math.pow(2,7),Pu=Math.pow(2,14),Au=Math.pow(2,21),Iu=Math.pow(2,28),$u=Math.pow(2,35),Cu=Math.pow(2,42),Nu=Math.pow(2,49),Ou=Math.pow(2,56),Ru=Math.pow(2,63),Bu=function(e){return e<ku?1:e<Pu?2:e<Au?3:e<Iu?4:e<$u?5:e<Cu?6:e<Nu?7:e<Ou?8:e<Ru?9:10},Du={encode:vu,decode:Tu,encodingLength:Bu},Bn=Du;function Nr(e,t=0){return[Bn.decode(e,t),Bn.decode.bytes]}function Dn(e,t,n=0){return Bn.encode(e,t,n),t}function jn(e){return Bn.encodingLength(e)}function Un(e,t){const n=t.byteLength,r=jn(e),a=r+jn(n),s=new Uint8Array(a+n);return Dn(e,s,0),Dn(n,s,r),s.set(t,a),new Yr(e,n,t,s)}function ir(e){const t=$t(e),[n,r]=Nr(t),[a,s]=Nr(t.subarray(r)),i=t.subarray(r+s);if(i.byteLength!==a)throw new Error("Incorrect length");return new Yr(n,a,i,t)}function ju(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&Qc(e.bytes,n.bytes)}}class Yr{constructor(t,n,r,a){h(this,"code");h(this,"size");h(this,"digest");h(this,"bytes");this.code=t,this.size=n,this.digest=r,this.bytes=a}}function Da(e,t){const{bytes:n,version:r}=e;switch(r){case 0:return Mu(n,Or(e),t??ue.encoder);default:return Lu(n,Or(e),t??Ge.encoder)}}const ja=new WeakMap;function Or(e){const t=ja.get(e);if(t==null){const n=new Map;return ja.set(e,n),n}return t}var o0;class E{constructor(t,n,r,a){h(this,"code");h(this,"version");h(this,"multihash");h(this,"bytes");h(this,"/");h(this,o0,"CID");this.code=n,this.version=t,this.multihash=r,this.bytes=a,this["/"]=a}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:n}=this;if(t!==Vt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==zu)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return E.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=Un(t,n);return E.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return E.equals(this,t)}static equals(t,n){const r=n;return r!=null&&t.code===r.code&&t.version===r.version&&ju(t.multihash,r.multihash)}toString(t){return Da(this,t)}toJSON(){return{"/":Da(this)}}link(){return this}[(o0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const n=t;if(n instanceof E)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:r,code:a,multihash:s,bytes:i}=n;return new E(r,a,s,i??Ua(r,a,s.bytes))}else if(n[Fu]===!0){const{version:r,multihash:a,code:s}=n,i=ir(a);return E.create(r,s,i)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(n!==Vt)throw new Error(`Version 0 CID must use dag-pb (code: ${Vt}) block encoding`);return new E(t,n,r,r.bytes)}case 1:{const a=Ua(t,n,r.bytes);return new E(t,n,r,a)}default:throw new Error("Invalid version")}}static createV0(t){return E.create(0,Vt,t)}static createV1(t,n){return E.create(1,t,n)}static decode(t){const[n,r]=E.decodeFirst(t);if(r.length!==0)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=E.inspectBytes(t),r=n.size-n.multihashSize,a=$t(t.subarray(r,r+n.multihashSize));if(a.byteLength!==n.multihashSize)throw new Error("Incorrect length");const s=a.subarray(n.multihashSize-n.digestSize),i=new Yr(n.multihashCode,n.digestSize,s,a);return[n.version===0?E.createV0(i):E.createV1(n.codec,i),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[f,_]=Nr(t.subarray(n));return n+=_,f};let a=r(),s=Vt;if(a===18?(a=0,n=0):s=r(),a!==0&&a!==1)throw new RangeError(`Invalid CID version ${a}`);const i=n,o=r(),c=r(),u=n+c,l=u-i;return{version:a,codec:s,multihashCode:o,digestSize:c,multihashSize:l,size:u}}static parse(t,n){const[r,a]=Uu(t,n),s=E.decode(a);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Or(s).set(r,t),s}}function Uu(e,t){switch(e[0]){case"Q":{const n=t??ue;return[ue.prefix,n.decode(`${ue.prefix}${e}`)]}case ue.prefix:{const n=t??ue;return[ue.prefix,n.decode(e)]}case Ge.prefix:{const n=t??Ge;return[Ge.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function Mu(e,t,n){const{prefix:r}=n;if(r!==ue.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const a=t.get(r);if(a==null){const s=n.encode(e).slice(1);return t.set(r,s),s}else return a}function Lu(e,t,n){const{prefix:r}=n,a=t.get(r);if(a==null){const s=n.encode(e);return t.set(r,s),s}else return a}const Vt=112,zu=18;function Ua(e,t,n){const r=jn(e),a=r+jn(t),s=new Uint8Array(a+n.byteLength);return Dn(e,s,0),Dn(t,s,r),s.set(n,a),s}const Fu=Symbol.for("@ipld/js-cid/CID");function Rr(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}const Vu=vn({prefix:"9",name:"base10",alphabet:"0123456789"}),Zu=Object.freeze(Object.defineProperty({__proto__:null,base10:Vu},Symbol.toStringTag,{value:"Module"})),Gu=ee({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qu=ee({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Hu=Object.freeze(Object.defineProperty({__proto__:null,base16:Gu,base16upper:qu},Symbol.toStringTag,{value:"Module"})),Wu=ee({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ku=Object.freeze(Object.defineProperty({__proto__:null,base2:Wu},Symbol.toStringTag,{value:"Module"})),Hs=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ju=Hs.reduce((e,t,n)=>(e[n]=t,e),[]),Qu=Hs.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Xu(e){return e.reduce((t,n)=>(t+=Ju[n],t),"")}function Yu(e){const t=[];for(const n of e){const r=Qu[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const ed=sr({prefix:"🚀",name:"base256emoji",encode:Xu,decode:Yu}),td=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ed},Symbol.toStringTag,{value:"Module"})),nd=vn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rd=vn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ad=Object.freeze(Object.defineProperty({__proto__:null,base36:nd,base36upper:rd},Symbol.toStringTag,{value:"Module"})),or=ee({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sd=ee({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ct=ee({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),id=ee({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),od=Object.freeze(Object.defineProperty({__proto__:null,base64:or,base64pad:sd,base64url:Ct,base64urlpad:id},Symbol.toStringTag,{value:"Module"})),cd=ee({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ud=Object.freeze(Object.defineProperty({__proto__:null,base8:cd},Symbol.toStringTag,{value:"Module"})),dd=sr({prefix:"\0",name:"identity",encode:e=>Yc(e),decode:e=>Xc(e)}),ld=Object.freeze(Object.defineProperty({__proto__:null,identity:dd},Symbol.toStringTag,{value:"Module"})),fd=new TextEncoder,hd=new TextDecoder,pd="json",yd=512;function md(e){return fd.encode(JSON.stringify(e))}function gd(e){return JSON.parse(hd.decode(e))}const wd=Object.freeze(Object.defineProperty({__proto__:null,code:yd,decode:gd,encode:md,name:pd},Symbol.toStringTag,{value:"Module"})),bd="raw",vd=85;function _d(e){return $t(e)}function xd(e){return $t(e)}const Ed=Object.freeze(Object.defineProperty({__proto__:null,code:vd,decode:xd,encode:_d,name:bd},Symbol.toStringTag,{value:"Module"})),Ws=0,Td="identity",Ks=$t;function Sd(e){return Un(Ws,Ks(e))}const Qt={code:Ws,name:Td,encode:Ks,digest:Sd},kd=Object.freeze(Object.defineProperty({__proto__:null,identity:Qt},Symbol.toStringTag,{value:"Module"}));function Js({name:e,code:t,encode:n}){return new Pd(e,t,n)}class Pd{constructor(t,n,r){h(this,"name");h(this,"code");h(this,"encode");this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Un(this.code,n):n.then(r=>Un(this.code,r))}else throw Error("Unknown type, must be binary type")}}function Qs(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const ea=Js({name:"sha2-256",code:18,encode:Qs("SHA-256")}),Ad=Js({name:"sha2-512",code:19,encode:Qs("SHA-512")}),Id=Object.freeze(Object.defineProperty({__proto__:null,sha256:ea,sha512:Ad},Symbol.toStringTag,{value:"Module"})),xt={...ld,...Ku,...ud,...Zu,...Hu,...bu,...ad,...du,...od,...td},$d={...Id,...kd},Cd={raw:Ed,json:wd};function ta(e=0){return new Uint8Array(e)}function Xs(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Ma=Xs("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),xr=Xs("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=ta(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Ys={utf8:Ma,"utf-8":Ma,hex:xt.base16,latin1:xr,ascii:xr,binary:xr,...xt};function fe(e,t="utf8"){const n=Ys[t];if(n==null)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}const Nd=Math.pow(2,7),Od=Math.pow(2,14),Rd=Math.pow(2,21),na=Math.pow(2,28),ra=Math.pow(2,35),aa=Math.pow(2,42),sa=Math.pow(2,49),H=128,re=127;function Xe(e){if(e<Nd)return 1;if(e<Od)return 2;if(e<Rd)return 3;if(e<na)return 4;if(e<ra)return 5;if(e<aa)return 6;if(e<sa)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Bd(e,t,n=0){switch(Xe(e)){case 8:t[n++]=e&255|H,e/=128;case 7:t[n++]=e&255|H,e/=128;case 6:t[n++]=e&255|H,e/=128;case 5:t[n++]=e&255|H,e/=128;case 4:t[n++]=e&255|H,e>>>=7;case 3:t[n++]=e&255|H,e>>>=7;case 2:t[n++]=e&255|H,e>>>=7;case 1:{t[n++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function Dd(e,t,n=0){switch(Xe(e)){case 8:t.set(n++,e&255|H),e/=128;case 7:t.set(n++,e&255|H),e/=128;case 6:t.set(n++,e&255|H),e/=128;case 5:t.set(n++,e&255|H),e/=128;case 4:t.set(n++,e&255|H),e>>>=7;case 3:t.set(n++,e&255|H),e>>>=7;case 2:t.set(n++,e&255|H),e>>>=7;case 1:{t.set(n++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function jd(e,t){let n=e[t],r=0;if(r+=n&re,n<H||(n=e[t+1],r+=(n&re)<<7,n<H)||(n=e[t+2],r+=(n&re)<<14,n<H)||(n=e[t+3],r+=(n&re)<<21,n<H)||(n=e[t+4],r+=(n&re)*na,n<H)||(n=e[t+5],r+=(n&re)*ra,n<H)||(n=e[t+6],r+=(n&re)*aa,n<H)||(n=e[t+7],r+=(n&re)*sa,n<H))return r;throw new RangeError("Could not decode varint")}function Ud(e,t){let n=e.get(t),r=0;if(r+=n&re,n<H||(n=e.get(t+1),r+=(n&re)<<7,n<H)||(n=e.get(t+2),r+=(n&re)<<14,n<H)||(n=e.get(t+3),r+=(n&re)<<21,n<H)||(n=e.get(t+4),r+=(n&re)*na,n<H)||(n=e.get(t+5),r+=(n&re)*ra,n<H)||(n=e.get(t+6),r+=(n&re)*aa,n<H)||(n=e.get(t+7),r+=(n&re)*sa,n<H))return r;throw new RangeError("Could not decode varint")}function cr(e,t,n=0){return t==null&&(t=ta(Xe(e))),t instanceof Uint8Array?Bd(e,t,n):Dd(e,t,n)}function _n(e,t=0){return e instanceof Uint8Array?jd(e,t):Ud(e,t)}function rt(e,t){t==null&&(t=e.reduce((a,s)=>a+s.length,0));const n=ta(t);let r=0;for(const a of e)n.set(a,r),r+=a.length;return n}class Md{constructor(){h(this,"index",0);h(this,"input","")}new(t){return this.index=0,this.input=t,this}readAtomically(t){const n=this.index,r=t();return r===void 0&&(this.index=n),r}parseWith(t){const n=t();if(this.index===this.input.length)return n}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{const n=this.readChar();if(n===t)return n})}readSeparator(t,n,r){return this.readAtomically(()=>{if(!(n>0&&this.readGivenChar(t)===void 0))return r()})}readNumber(t,n,r,a){return this.readAtomically(()=>{let s=0,i=0;const o=this.peekChar();if(o===void 0)return;const c=o==="0",u=2**(8*a)-1;for(;;){const l=this.readAtomically(()=>{const f=this.readChar();if(f===void 0)return;const _=Number.parseInt(f,t);if(!Number.isNaN(_))return _});if(l===void 0)break;if(s*=t,s+=l,s>u||(i+=1,n!==void 0&&i>n))return}if(i!==0)return!r&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{const t=new Uint8Array(4);for(let n=0;n<t.length;n++){const r=this.readSeparator(".",n,()=>this.readNumber(10,3,!1,1));if(r===void 0)return;t[n]=r}return t})}readIPv6Addr(){const t=n=>{for(let r=0;r<n.length/2;r++){const a=r*2;if(r<n.length-3){const i=this.readSeparator(":",r,()=>this.readIPv4Addr());if(i!==void 0)return n[a]=i[0],n[a+1]=i[1],n[a+2]=i[2],n[a+3]=i[3],[a+4,!0]}const s=this.readSeparator(":",r,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[a,!1];n[a]=s>>8,n[a+1]=s&255}return[n.length,!1]};return this.readAtomically(()=>{const n=new Uint8Array(16),[r,a]=t(n);if(r===16)return n;if(a||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const s=new Uint8Array(14),i=16-(r+2),[o]=t(s.subarray(0,i));return n.set(s.subarray(0,o),16-o),n})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const ei=45,Ld=15,Et=new Md;function zd(e){if(!(e.length>Ld))return Et.new(e).parseWith(()=>Et.readIPv4Addr())}function Fd(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>ei))return Et.new(e).parseWith(()=>Et.readIPv6Addr())}function Vd(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>ei))return Et.new(e).parseWith(()=>Et.readIPAddr())}function xn(e,t="utf8"){const n=Ys[t];if(n==null)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}function Zd(e){return!!zd(e)}function Gd(e){return!!Fd(e)}function ti(e){return!!Vd(e)}const La=Zd,qd=Gd,ni=function(e){let t=0;if(e=e.toString().trim(),La(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach(r=>{n[t++]=parseInt(r,10)&255}),n}if(qd(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){const s=La(n[r]);let i;s&&(i=ni(n[r]),n[r]=fe(i.slice(0,2),"base16")),i!=null&&++r<8&&n.splice(r,0,fe(i.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(r=0;r<n.length&&n[r]!=="";r++);const s=[r,1];for(r=9-n.length;r>0;r--)s.push("0");n.splice.apply(n,s)}const a=new Uint8Array(t+16);for(r=0;r<n.length;r++){const s=parseInt(n[r],16);a[t++]=s>>8&255,a[t++]=s&255}return a}throw new Error("invalid ip address")},Hd=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(n===4){const a=[];for(let s=0;s<n;s++)a.push(e[t+s]);return a.join(".")}if(n===16){const a=[];for(let s=0;s<n;s+=2)a.push(r.getUint16(t+s).toString(16));return a.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},ge=-1,Xt={},Br={},Wd=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,ge,"ip6zone"],[43,8,"ipcidr"],[53,ge,"dns",!0],[54,ge,"dns4",!0],[55,ge,"dns6",!0],[56,ge,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,ge,"unix",!1,!0],[421,ge,"ipfs"],[421,ge,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,ge,"garlic64"],[448,0,"tls"],[449,ge,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,ge,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,ge,"memory"]];Wd.forEach(e=>{const t=Kd(...e);Br[t.code]=t,Xt[t.name]=t});function Kd(e,t,n,r,a){return{code:e,size:t,name:n,resolvable:!!r,path:!!a}}function F(e){if(typeof e=="number"){if(Br[e]!=null)return Br[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Xt[e]!=null)return Xt[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}F("ip4");F("ip6");F("ipcidr");function ri(e,t){switch(F(e).code){case 4:case 41:return Qd(t);case 42:return Za(t);case 6:case 273:case 33:case 132:return ai(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Za(t);case 421:return tl(t);case 444:return Ga(t);case 445:return Ga(t);case 466:return el(t);default:return fe(t,"base16")}}function za(e,t){switch(F(e).code){case 4:return Fa(t);case 41:return Fa(t);case 42:return Va(t);case 6:case 273:case 33:case 132:return ia(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Va(t);case 421:return Xd(t);case 444:return nl(t);case 445:return rl(t);case 466:return Yd(t);default:return xn(t,"base16")}}const Er=Object.values(xt).map(e=>e.decoder),Jd=function(){let e=Er[0].or(Er[1]);return Er.slice(2).forEach(t=>e=e.or(t)),e}();function Fa(e){if(!ti(e))throw new Error("invalid ip address");return ni(e)}function Qd(e){const t=Hd(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!ti(t))throw new Error("invalid ip address");return t}function ia(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function ai(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Va(e){const t=xn(e),n=Uint8Array.from(cr(t.length));return rt([n,t],n.length+t.length)}function Za(e){const t=_n(e);if(e=e.slice(Xe(t)),e.length!==t)throw new Error("inconsistent lengths");return fe(e)}function Xd(e){let t;e[0]==="Q"||e[0]==="1"?t=ir(ue.decode(`z${e}`)).bytes:t=E.parse(e).multihash.bytes;const n=Uint8Array.from(cr(t.length));return rt([n,t],n.length+t.length)}function Yd(e){const t=Jd.decode(e),n=Uint8Array.from(cr(t.length));return rt([n,t],n.length+t.length)}function el(e){const t=_n(e),n=e.slice(Xe(t));if(n.length!==t)throw new Error("inconsistent lengths");return"u"+fe(n,"base64url")}function tl(e){const t=_n(e),n=e.slice(Xe(t));if(n.length!==t)throw new Error("inconsistent lengths");return fe(n,"base58btc")}function nl(e){const t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=Ge.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const a=ia(r);return rt([n,a],n.length+a.length)}function rl(e){const t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=Ge.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const a=ia(r);return rt([n,a],n.length+a.length)}function Ga(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2),r=fe(t,"base32"),a=ai(n);return`${r}:${a}`}function al(e){e=Dr(e);const t=[],n=[];let r=null;const a=e.split("/").slice(1);if(a.length===1&&a[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<a.length;s++){const i=a[s],o=F(i);if(o.size===0){t.push([o.code]),n.push([o.code]);continue}if(s++,s>=a.length)throw oi("invalid address: "+e);if(o.path===!0){r=Dr(a.slice(s).join("/")),t.push([o.code,za(o.code,r)]),n.push([o.code,r]);break}const c=za(o.code,a[s]);t.push([o.code,c]),n.push([o.code,ri(o.code,c)])}return{string:si(n),bytes:ii(t),tuples:t,stringTuples:n,path:r}}function qa(e){const t=[],n=[];let r=null,a=0;for(;a<e.length;){const s=_n(e,a),i=Xe(s),o=F(s),c=sl(o,e.slice(a+i));if(c===0){t.push([s]),n.push([s]),a+=i;continue}const u=e.slice(a+i,a+i+c);if(a+=c+i,a>e.length)throw oi("Invalid address Uint8Array: "+fe(e,"base16"));t.push([s,u]);const l=ri(s,u);if(n.push([s,l]),o.path===!0){r=l;break}}return{bytes:Uint8Array.from(e),string:si(n),tuples:t,stringTuples:n,path:r}}function si(e){const t=[];return e.map(n=>{const r=F(n[0]);return t.push(r.name),n.length>1&&n[1]!=null&&t.push(n[1]),null}),Dr(t.join("/"))}function ii(e){return rt(e.map(t=>{const n=F(t[0]);let r=Uint8Array.from(cr(n.code));return t.length>1&&t[1]!=null&&(r=rt([r,t[1]])),r}))}function sl(e,t){if(e.size>0)return e.size/8;if(e.size===0)return 0;{const n=_n(t instanceof Uint8Array?t:Uint8Array.from(t));return n+Xe(n)}}function Dr(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function oi(e){return new Error("Error parsing address: "+e)}const il=Symbol.for("nodejs.util.inspect.custom"),ci=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ol=[F("dns").code,F("dns4").code,F("dns6").code,F("dnsaddr").code];var _t,Ve,gn,wn,c0;const gt=class gt{constructor(t){h(this,"bytes");zt(this,_t,void 0);zt(this,Ve,void 0);zt(this,gn,void 0);zt(this,wn,void 0);h(this,c0,!0);t==null&&(t="");let n;if(t instanceof Uint8Array)n=qa(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);n=al(t)}else if(Mn(t))n=qa(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=n.bytes,Ft(this,_t,n.string),Ft(this,Ve,n.tuples),Ft(this,gn,n.stringTuples),Ft(this,wn,n.path)}toString(){return Oe(this,_t)}toJSON(){return this.toString()}toOptions(){let t,n,r,a,s="";const i=F("tcp"),o=F("udp"),c=F("ip4"),u=F("ip6"),l=F("dns6"),f=F("ip6zone");for(const[g,b]of this.stringTuples())g===f.code&&(s=`%${b??""}`),ol.includes(g)&&(n=i.name,a=443,r=`${b??""}${s}`,t=g===l.code?6:4),(g===i.code||g===o.code)&&(n=F(g).name,a=parseInt(b??"")),(g===c.code||g===u.code)&&(n=F(g).name,r=`${b??""}${s}`,t=g===u.code?6:4);if(t==null||n==null||r==null||a==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:r,transport:n,port:a}}protos(){return Oe(this,Ve).map(([t])=>Object.assign({},F(t)))}protoCodes(){return Oe(this,Ve).map(([t])=>t)}protoNames(){return Oe(this,Ve).map(([t])=>F(t).name)}tuples(){return Oe(this,Ve)}stringTuples(){return Oe(this,gn)}encapsulate(t){return t=new gt(t),new gt(this.toString()+t.toString())}decapsulate(t){const n=t.toString(),r=this.toString(),a=r.lastIndexOf(n);if(a<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new gt(r.slice(0,a))}decapsulateCode(t){const n=this.tuples();for(let r=n.length-1;r>=0;r--)if(n[r][0]===t)return new gt(ii(n.slice(0,r)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach(([r,a])=>{r===Xt.p2p.code&&t.push([r,a]),r===Xt["p2p-circuit"].code&&(t=[])});const n=t.pop();if((n==null?void 0:n[1])!=null){const r=n[1];return r[0]==="Q"||r[0]==="1"?fe(ue.decode(`z${r}`),"base58btc"):fe(E.parse(r).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return Oe(this,wn)}equals(t){return Rr(this.bytes,t.bytes)}async resolve(t){const n=this.protos().find(s=>s.resolvable);if(n==null)return[this];const r=cl.get(n.name);if(r==null)throw new Ze(`no available resolver for ${n.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,t)).map(s=>le(s))}nodeAddress(){const t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const n=(t??this).protos();return!(n.length!==2||n[0].code!==4&&n[0].code!==41||n[1].code!==6&&n[1].code!==273)}[(c0=ci,il)](){return`Multiaddr(${Oe(this,_t)})`}};_t=new WeakMap,Ve=new WeakMap,gn=new WeakMap,wn=new WeakMap;let jr=gt;const cl=new Map;function Mn(e){return!!(e!=null&&e[ci])}function le(e){return new jr(e)}const ul=["string","number","bigint","symbol"],dl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ll(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(ul.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(fl(e))return"Buffer";const n=hl(e);return n||"Object"}function fl(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function hl(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(dl.includes(t))return t}class d{constructor(t,n,r){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);class m{constructor(t,n,r){this.type=t,this.value=n,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Nt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",pl=new TextDecoder,yl=new TextEncoder;function Ln(e){return Nt&&globalThis.Buffer.isBuffer(e)}function oa(e){return e instanceof Uint8Array?Ln(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const ml=Nt?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Wa(e,t,n):(e,t,n)=>n-t>64?pl.decode(e.subarray(t,n)):Wa(e,t,n),ui=Nt?e=>e.length>64?globalThis.Buffer.from(e):Ha(e):e=>e.length>64?yl.encode(e):Ha(e),Re=e=>Uint8Array.from(e),ca=Nt?(e,t,n)=>Ln(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),gl=Nt?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),oa(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let a of e)r+a.length>n.length&&(a=a.subarray(0,n.length-r)),n.set(a,r),r+=a.length;return n},wl=Nt?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function bl(e,t){if(Ln(e)&&Ln(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function Ha(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t}function Wa(e,t,n){const r=[];for(;t<n;){const a=e[t];let s=null,i=a>239?4:a>223?3:a>191?2:1;if(t+i<=n){let o,c,u,l;switch(i){case 1:a<128&&(s=a);break;case 2:o=e[t+1],(o&192)===128&&(l=(a&31)<<6|o&63,l>127&&(s=l));break;case 3:o=e[t+1],c=e[t+2],(o&192)===128&&(c&192)===128&&(l=(a&15)<<12|(o&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:o=e[t+1],c=e[t+2],u=e[t+3],(o&192)===128&&(c&192)===128&&(u&192)===128&&(l=(a&15)<<18|(o&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),t+=i}return di(r)}const Ka=4096;function di(e){const t=e.length;if(t<=Ka)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Ka));return n}const vl=256;class li{constructor(t=vl){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const a=n.length-(this.maxCursor-this.cursor)-1;n.set(t,a)}else{if(n){const a=n.length-(this.maxCursor-this.cursor)-1;a<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,a),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=wl(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const r=this.chunks[0];t&&this.cursor>r.length/2?(n=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=ca(r,0,this.cursor)}else n=gl(this.chunks,this.cursor);return t&&this.reset(),n}}const k="CBOR decode error:",tt="CBOR encode error:";function Ot(e,t,n){if(e.length-t<n)throw new Error(`${k} not enough data for type`)}const Y=[24,256,65536,4294967296,BigInt("18446744073709551616")];function it(e,t,n){Ot(e,t,1);const r=e[t];if(n.strict===!0&&r<Y[0])throw new Error(`${k} integer encoded in more bytes than necessary (strict decode)`);return r}function ot(e,t,n){Ot(e,t,2);const r=e[t]<<8|e[t+1];if(n.strict===!0&&r<Y[1])throw new Error(`${k} integer encoded in more bytes than necessary (strict decode)`);return r}function ct(e,t,n){Ot(e,t,4);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&r<Y[2])throw new Error(`${k} integer encoded in more bytes than necessary (strict decode)`);return r}function ut(e,t,n){Ot(e,t,8);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],a=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(a);if(n.strict===!0&&s<Y[3])throw new Error(`${k} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(n.allowBigInt===!0)return s;throw new Error(`${k} integers outside of the safe integer range are not supported`)}function _l(e,t,n,r){return new m(d.uint,it(e,t+1,r),2)}function xl(e,t,n,r){return new m(d.uint,ot(e,t+1,r),3)}function El(e,t,n,r){return new m(d.uint,ct(e,t+1,r),5)}function Tl(e,t,n,r){return new m(d.uint,ut(e,t+1,r),9)}function dt(e,t){return ve(e,0,t.value)}function ve(e,t,n){if(n<Y[0]){const r=Number(n);e.push([t|r])}else if(n<Y[1]){const r=Number(n);e.push([t|24,r])}else if(n<Y[2]){const r=Number(n);e.push([t|25,r>>>8,r&255])}else if(n<Y[3]){const r=Number(n);e.push([t|26,r>>>24&255,r>>>16&255,r>>>8&255,r&255])}else{const r=BigInt(n);if(r<Y[4]){const a=[t|27,0,0,0,0,0,0,0];let s=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));a[8]=s&255,s=s>>8,a[7]=s&255,s=s>>8,a[6]=s&255,s=s>>8,a[5]=s&255,a[4]=i&255,i=i>>8,a[3]=i&255,i=i>>8,a[2]=i&255,i=i>>8,a[1]=i&255,e.push(a)}else throw new Error(`${k} encountered BigInt larger than allowable range`)}}dt.encodedSize=function(t){return ve.encodedSize(t.value)};ve.encodedSize=function(t){return t<Y[0]?1:t<Y[1]?2:t<Y[2]?3:t<Y[3]?5:9};dt.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function Sl(e,t,n,r){return new m(d.negint,-1-it(e,t+1,r),2)}function kl(e,t,n,r){return new m(d.negint,-1-ot(e,t+1,r),3)}function Pl(e,t,n,r){return new m(d.negint,-1-ct(e,t+1,r),5)}const ua=BigInt(-1),fi=BigInt(1);function Al(e,t,n,r){const a=ut(e,t+1,r);if(typeof a!="bigint"){const s=-1-a;if(s>=Number.MIN_SAFE_INTEGER)return new m(d.negint,s,9)}if(r.allowBigInt!==!0)throw new Error(`${k} integers outside of the safe integer range are not supported`);return new m(d.negint,ua-BigInt(a),9)}function da(e,t){const n=t.value,r=typeof n=="bigint"?n*ua-fi:n*-1-1;ve(e,t.type.majorEncoded,r)}da.encodedSize=function(t){const n=t.value,r=typeof n=="bigint"?n*ua-fi:n*-1-1;return r<Y[0]?1:r<Y[1]?2:r<Y[2]?3:r<Y[3]?5:9};da.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function En(e,t,n,r){Ot(e,t,n+r);const a=ca(e,t+n,t+n+r);return new m(d.bytes,a,n+r)}function Il(e,t,n,r){return En(e,t,1,n)}function $l(e,t,n,r){return En(e,t,2,it(e,t+1,r))}function Cl(e,t,n,r){return En(e,t,3,ot(e,t+1,r))}function Nl(e,t,n,r){return En(e,t,5,ct(e,t+1,r))}function Ol(e,t,n,r){const a=ut(e,t+1,r);if(typeof a=="bigint")throw new Error(`${k} 64-bit integer bytes lengths not supported`);return En(e,t,9,a)}function zn(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===d.string?ui(e.value):e.value),e.encodedBytes}function ur(e,t){const n=zn(t);ve(e,t.type.majorEncoded,n.length),e.push(n)}ur.encodedSize=function(t){const n=zn(t);return ve.encodedSize(n.length)+n.length};ur.compareTokens=function(t,n){return Rl(zn(t),zn(n))};function Rl(e,t){return e.length<t.length?-1:e.length>t.length?1:bl(e,t)}function Tn(e,t,n,r,a){const s=n+r;Ot(e,t,s);const i=new m(d.string,ml(e,t+n,t+s),s);return a.retainStringBytes===!0&&(i.byteValue=ca(e,t+n,t+s)),i}function Bl(e,t,n,r){return Tn(e,t,1,n,r)}function Dl(e,t,n,r){return Tn(e,t,2,it(e,t+1,r),r)}function jl(e,t,n,r){return Tn(e,t,3,ot(e,t+1,r),r)}function Ul(e,t,n,r){return Tn(e,t,5,ct(e,t+1,r),r)}function Ml(e,t,n,r){const a=ut(e,t+1,r);if(typeof a=="bigint")throw new Error(`${k} 64-bit integer string lengths not supported`);return Tn(e,t,9,a,r)}const Ll=ur;function Rt(e,t,n,r){return new m(d.array,r,n)}function zl(e,t,n,r){return Rt(e,t,1,n)}function Fl(e,t,n,r){return Rt(e,t,2,it(e,t+1,r))}function Vl(e,t,n,r){return Rt(e,t,3,ot(e,t+1,r))}function Zl(e,t,n,r){return Rt(e,t,5,ct(e,t+1,r))}function Gl(e,t,n,r){const a=ut(e,t+1,r);if(typeof a=="bigint")throw new Error(`${k} 64-bit integer array lengths not supported`);return Rt(e,t,9,a)}function ql(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${k} indefinite length items not allowed`);return Rt(e,t,1,1/0)}function la(e,t){ve(e,d.array.majorEncoded,t.value)}la.compareTokens=dt.compareTokens;la.encodedSize=function(t){return ve.encodedSize(t.value)};function Bt(e,t,n,r){return new m(d.map,r,n)}function Hl(e,t,n,r){return Bt(e,t,1,n)}function Wl(e,t,n,r){return Bt(e,t,2,it(e,t+1,r))}function Kl(e,t,n,r){return Bt(e,t,3,ot(e,t+1,r))}function Jl(e,t,n,r){return Bt(e,t,5,ct(e,t+1,r))}function Ql(e,t,n,r){const a=ut(e,t+1,r);if(typeof a=="bigint")throw new Error(`${k} 64-bit integer map lengths not supported`);return Bt(e,t,9,a)}function Xl(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${k} indefinite length items not allowed`);return Bt(e,t,1,1/0)}function fa(e,t){ve(e,d.map.majorEncoded,t.value)}fa.compareTokens=dt.compareTokens;fa.encodedSize=function(t){return ve.encodedSize(t.value)};function Yl(e,t,n,r){return new m(d.tag,n,1)}function ef(e,t,n,r){return new m(d.tag,it(e,t+1,r),2)}function tf(e,t,n,r){return new m(d.tag,ot(e,t+1,r),3)}function nf(e,t,n,r){return new m(d.tag,ct(e,t+1,r),5)}function rf(e,t,n,r){return new m(d.tag,ut(e,t+1,r),9)}function ha(e,t){ve(e,d.tag.majorEncoded,t.value)}ha.compareTokens=dt.compareTokens;ha.encodedSize=function(t){return ve.encodedSize(t.value)};const af=20,sf=21,of=22,cf=23;function uf(e,t,n,r){if(r.allowUndefined===!1)throw new Error(`${k} undefined values are not supported`);return r.coerceUndefinedToNull===!0?new m(d.null,null,1):new m(d.undefined,void 0,1)}function df(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${k} indefinite length items not allowed`);return new m(d.break,void 0,1)}function pa(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${k} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${k} Infinity values are not supported`)}return new m(d.float,e,t)}function lf(e,t,n,r){return pa(ma(e,t+1),3,r)}function ff(e,t,n,r){return pa(ga(e,t+1),5,r)}function hf(e,t,n,r){return pa(mi(e,t+1),9,r)}function ya(e,t,n){const r=t.value;if(r===!1)e.push([d.float.majorEncoded|af]);else if(r===!0)e.push([d.float.majorEncoded|sf]);else if(r===null)e.push([d.float.majorEncoded|of]);else if(r===void 0)e.push([d.float.majorEncoded|cf]);else{let a,s=!1;(!n||n.float64!==!0)&&(pi(r),a=ma(xe,1),r===a||Number.isNaN(r)?(xe[0]=249,e.push(xe.slice(0,3)),s=!0):(yi(r),a=ga(xe,1),r===a&&(xe[0]=250,e.push(xe.slice(0,5)),s=!0))),s||(pf(r),a=mi(xe,1),xe[0]=251,e.push(xe.slice(0,9)))}}ya.encodedSize=function(t,n){const r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!n||n.float64!==!0){pi(r);let a=ma(xe,1);if(r===a||Number.isNaN(r))return 3;if(yi(r),a=ga(xe,1),r===a)return 5}return 9};const hi=new ArrayBuffer(9),we=new DataView(hi,1),xe=new Uint8Array(hi,0);function pi(e){if(e===1/0)we.setUint16(0,31744,!1);else if(e===-1/0)we.setUint16(0,64512,!1);else if(Number.isNaN(e))we.setUint16(0,32256,!1);else{we.setFloat32(0,e);const t=we.getUint32(0),n=(t&2139095040)>>23,r=t&8388607;if(n===255)we.setUint16(0,31744,!1);else if(n===0)we.setUint16(0,(e&2147483648)>>16|r>>13,!1);else{const a=n-127;a<-24?we.setUint16(0,0):a<-14?we.setUint16(0,(t&2147483648)>>16|1<<24+a,!1):we.setUint16(0,(t&2147483648)>>16|a+15<<10|r>>13,!1)}}}function ma(e,t){if(e.length-t<2)throw new Error(`${k} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const r=n>>10&31,a=n&1023;let s;return r===0?s=a*2**-24:r!==31?s=(a+1024)*2**(r-25):s=a===0?1/0:NaN,n&32768?-s:s}function yi(e){we.setFloat32(0,e,!1)}function ga(e,t){if(e.length-t<4)throw new Error(`${k} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function pf(e){we.setFloat64(0,e,!1)}function mi(e,t){if(e.length-t<8)throw new Error(`${k} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}ya.compareTokens=dt.compareTokens;function G(e,t,n){throw new Error(`${k} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function dr(e){return()=>{throw new Error(`${k} ${e}`)}}const w=[];for(let e=0;e<=23;e++)w[e]=G;w[24]=_l;w[25]=xl;w[26]=El;w[27]=Tl;w[28]=G;w[29]=G;w[30]=G;w[31]=G;for(let e=32;e<=55;e++)w[e]=G;w[56]=Sl;w[57]=kl;w[58]=Pl;w[59]=Al;w[60]=G;w[61]=G;w[62]=G;w[63]=G;for(let e=64;e<=87;e++)w[e]=Il;w[88]=$l;w[89]=Cl;w[90]=Nl;w[91]=Ol;w[92]=G;w[93]=G;w[94]=G;w[95]=dr("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)w[e]=Bl;w[120]=Dl;w[121]=jl;w[122]=Ul;w[123]=Ml;w[124]=G;w[125]=G;w[126]=G;w[127]=dr("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)w[e]=zl;w[152]=Fl;w[153]=Vl;w[154]=Zl;w[155]=Gl;w[156]=G;w[157]=G;w[158]=G;w[159]=ql;for(let e=160;e<=183;e++)w[e]=Hl;w[184]=Wl;w[185]=Kl;w[186]=Jl;w[187]=Ql;w[188]=G;w[189]=G;w[190]=G;w[191]=Xl;for(let e=192;e<=215;e++)w[e]=Yl;w[216]=ef;w[217]=tf;w[218]=nf;w[219]=rf;w[220]=G;w[221]=G;w[222]=G;w[223]=G;for(let e=224;e<=243;e++)w[e]=dr("simple values are not supported");w[244]=G;w[245]=G;w[246]=G;w[247]=uf;w[248]=dr("simple values are not supported");w[249]=lf;w[250]=ff;w[251]=hf;w[252]=G;w[253]=G;w[254]=G;w[255]=df;const Ce=[];for(let e=0;e<24;e++)Ce[e]=new m(d.uint,e,1);for(let e=-1;e>=-24;e--)Ce[31-e]=new m(d.negint,e,1);Ce[64]=new m(d.bytes,new Uint8Array(0),1);Ce[96]=new m(d.string,"",1);Ce[128]=new m(d.array,0,1);Ce[160]=new m(d.map,0,1);Ce[244]=new m(d.false,!1,1);Ce[245]=new m(d.true,!0,1);Ce[246]=new m(d.null,null,1);function yf(e){switch(e.type){case d.false:return Re([244]);case d.true:return Re([245]);case d.null:return Re([246]);case d.bytes:return e.value.length?void 0:Re([64]);case d.string:return e.value===""?Re([96]):void 0;case d.array:return e.value===0?Re([128]):void 0;case d.map:return e.value===0?Re([160]):void 0;case d.uint:return e.value<24?Re([Number(e.value)]):void 0;case d.negint:if(e.value>=-24)return Re([31-Number(e.value)])}}const mf={float64:!1,mapSorter:bf,quickEncodeToken:yf};function gf(){const e=[];return e[d.uint.major]=dt,e[d.negint.major]=da,e[d.bytes.major]=ur,e[d.string.major]=Ll,e[d.array.major]=la,e[d.map.major]=fa,e[d.tag.major]=ha,e[d.float.major]=ya,e}const gi=gf(),Tr=new li;class Fn{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${tt} object contains circular references`);return new Fn(n,t)}}const ze={null:new m(d.null,null),undefined:new m(d.undefined,void 0),true:new m(d.true,!0),false:new m(d.false,!1),emptyArray:new m(d.array,0),emptyMap:new m(d.map,0)},He={number(e,t,n,r){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new m(d.float,e):e>=0?new m(d.uint,e):new m(d.negint,e)},bigint(e,t,n,r){return e>=BigInt(0)?new m(d.uint,e):new m(d.negint,e)},Uint8Array(e,t,n,r){return new m(d.bytes,e)},string(e,t,n,r){return new m(d.string,e)},boolean(e,t,n,r){return e?ze.true:ze.false},null(e,t,n,r){return ze.null},undefined(e,t,n,r){return ze.undefined},ArrayBuffer(e,t,n,r){return new m(d.bytes,new Uint8Array(e))},DataView(e,t,n,r){return new m(d.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,r){if(!e.length)return n.addBreakTokens===!0?[ze.emptyArray,new m(d.break)]:ze.emptyArray;r=Fn.createCheck(r,e);const a=[];let s=0;for(const i of e)a[s++]=On(i,n,r);return n.addBreakTokens?[new m(d.array,e.length),a,new m(d.break)]:[new m(d.array,e.length),a]},Object(e,t,n,r){const a=t!=="Object",s=a?e.keys():Object.keys(e),i=a?e.size:s.length;if(!i)return n.addBreakTokens===!0?[ze.emptyMap,new m(d.break)]:ze.emptyMap;r=Fn.createCheck(r,e);const o=[];let c=0;for(const u of s)o[c++]=[On(u,n,r),On(a?e.get(u):e[u],n,r)];return wf(o,n),n.addBreakTokens?[new m(d.map,i),o,new m(d.break)]:[new m(d.map,i),o]}};He.Map=He.Object;He.Buffer=He.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))He[`${e}Array`]=He.DataView;function On(e,t={},n){const r=ll(e),a=t&&t.typeEncoders&&t.typeEncoders[r]||He[r];if(typeof a=="function"){const i=a(e,r,t,n);if(i!=null)return i}const s=He[r];if(!s)throw new Error(`${tt} unsupported type: ${r}`);return s(e,r,t,n)}function wf(e,t){t.mapSorter&&e.sort(t.mapSorter)}function bf(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const a=n.type.major,s=gi[a].compareTokens(n,r);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function wi(e,t,n,r){if(Array.isArray(t))for(const a of t)wi(e,a,n,r);else n[t.type.major](e,t,r)}function bi(e,t,n){const r=On(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const a=n.quickEncodeToken(r);if(a)return a;const s=t[r.type.major];if(s.encodedSize){const i=s.encodedSize(r,n),o=new li(i);if(s(o,r,n),o.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return oa(o.chunks[0])}}return Tr.reset(),wi(Tr,r,t,n),Tr.toBytes(!0)}function vf(e,t){return t=Object.assign({},mf,t),bi(e,gi,t)}const _f={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class xf{constructor(t,n={}){this._pos=0,this.data=t,this.options=n}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let n=Ce[t];if(n===void 0){const r=w[t];if(!r)throw new Error(`${k} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const a=t&31;n=r(this.data,this._pos,a,this.options)}return this._pos+=n.encodedLength,n}}const Yt=Symbol.for("DONE"),lr=Symbol.for("BREAK");function Ef(e,t,n){const r=[];for(let a=0;a<e.value;a++){const s=en(t,n);if(s===lr){if(e.value===1/0)break;throw new Error(`${k} got unexpected break to lengthed array`)}if(s===Yt)throw new Error(`${k} found array but not enough entries (got ${a}, expected ${e.value})`);r[a]=s}return r}function Tf(e,t,n){const r=n.useMaps===!0,a=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const o=en(t,n);if(o===lr){if(e.value===1/0)break;throw new Error(`${k} got unexpected break to lengthed map`)}if(o===Yt)throw new Error(`${k} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(r!==!0&&typeof o!="string")throw new Error(`${k} non-string keys not supported (got ${typeof o})`);if(n.rejectDuplicateMapKeys===!0&&(r&&s.has(o)||!r&&o in a))throw new Error(`${k} found repeat map key "${o}"`);const c=en(t,n);if(c===Yt)throw new Error(`${k} found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(o,c):a[o]=c}return r?s:a}function en(e,t){if(e.done())return Yt;const n=e.next();if(n.type===d.break)return lr;if(n.type.terminal)return n.value;if(n.type===d.array)return Ef(n,e,t);if(n.type===d.map)return Tf(n,e,t);if(n.type===d.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const r=en(e,t);return t.tags[n.value](r)}throw new Error(`${k} tag not supported (${n.value})`)}throw new Error("unsupported")}function Sf(e,t){if(!(e instanceof Uint8Array))throw new Error(`${k} data to decode must be a Uint8Array`);t=Object.assign({},_f,t);const n=t.tokenizer||new xf(e,t),r=en(n,t);if(r===Yt)throw new Error(`${k} did not find any content to decode`);if(r===lr)throw new Error(`${k} got unexpected break`);return[r,e.subarray(n.pos())]}function vi(e,t){const[n,r]=Sf(e,t);if(r.length>0)throw new Error(`${k} too many terminals, data makes no sense`);return n}const _i=42;function xi(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function kf(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=E.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new m(d.tag,_i),new m(d.bytes,n)]}function Pf(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Af(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Ur={float64:!0,typeEncoders:{Object:kf,undefined:Pf,number:Af}},If={...Ur,typeEncoders:{...Ur.typeEncoders}};function $f(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return E.decode(e.subarray(1))}const Vn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Vn.tags[_i]=$f;const Cf={...Vn,tags:Vn.tags.slice()},Nf="dag-cbor",Of=113,Ei=e=>vf(e,Ur),Ti=e=>vi(xi(e),Vn),Rf=Object.freeze(Object.defineProperty({__proto__:null,code:Of,decode:Ti,decodeOptions:Cf,encode:Ei,encodeOptions:If,name:Nf,toByteView:xi},Symbol.toStringTag,{value:"Module"}));class Bf extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){const n=this.inRecursive[this.inRecursive.length-1];n&&(n.type===d.array&&(n.elements++,n.elements!==1&&t.push([44])),n.type===d.map&&(n.elements++,n.elements!==1&&(n.elements%2===1?t.push([44]):t.push([58]))))}[d.uint.major](t,n){this.prefix(t);const r=String(n.value),a=[];for(let s=0;s<r.length;s++)a[s]=r.charCodeAt(s);t.push(a)}[d.negint.major](t,n){this[d.uint.major](t,n)}[d.bytes.major](t,n){throw new Error(`${tt} unsupported type: Uint8Array`)}[d.string.major](t,n){this.prefix(t);const r=ui(JSON.stringify(n.value));t.push(r.length>32?oa(r):r)}[d.array.major](t,n){this.prefix(t),this.inRecursive.push({type:d.array,elements:0}),t.push([91])}[d.map.major](t,n){this.prefix(t),this.inRecursive.push({type:d.map,elements:0}),t.push([123])}[d.tag.major](t,n){}[d.float.major](t,n){if(n.type.name==="break"){const i=this.inRecursive.pop();if(i){if(i.type===d.array)t.push([93]);else if(i.type===d.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(n.value===void 0)throw new Error(`${tt} unsupported type: undefined`);if(this.prefix(t),n.type.name==="true"){t.push([116,114,117,101]);return}else if(n.type.name==="false"){t.push([102,97,108,115,101]);return}else if(n.type.name==="null"){t.push([110,117,108,108]);return}const r=String(n.value),a=[];let s=!1;for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i),!s&&(a[i]===46||a[i]===101||a[i]===69)&&(s=!0);s||(a.push(46),a.push(48)),t.push(a)}}function Df(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${tt} complex map keys are not supported`);const n=e[0],r=t[0];if(n.type!==d.string||r.type!==d.string)throw new Error(`${tt} non-string map keys are not supported`);if(n<r)return-1;if(n>r)return 1;throw new Error(`${tt} unexpected duplicate map keys, this is not supported`)}const jf={addBreakTokens:!0,mapSorter:Df};function Uf(e,t){return t=Object.assign({},jf,t),bi(e,new Bf,t)}class Si{constructor(t,n={}){this._pos=0,this.data=t,this.options=n,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error(`${k} unexpected end of input at position ${this._pos}`);for(let n=0;n<t.length;n++)if(this.data[this._pos++]!==t[n])throw new Error(`${k} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){const t=this._pos;let n=!1,r=!1;const a=o=>{for(;!this.done();){const c=this.ch();if(o.includes(c))this._pos++;else break}};if(this.ch()===45&&(n=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,r=!0;else return new m(d.uint,0,this._pos-t);if(a([48,49,50,51,52,53,54,55,56,57]),n&&this._pos===t+1)throw new Error(`${k} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(r)throw new Error(`${k} unexpected token at position ${this._pos}`);r=!0,this._pos++,a([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(r=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,a([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),i=parseFloat(s);return r?new m(d.float,i,this._pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new m(i>=0?d.uint:d.negint,i,this._pos-t):new m(i>=0?d.uint:d.negint,BigInt(s),this._pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${k} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,i=0;s<this.data.length&&i<65536;s++,i++){const o=this.data[s];if(o===92||o<32||o>=128)break;if(o===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new m(d.string,c,i)}}const t=this._pos,n=[],r=()=>{if(this._pos+4>=this.data.length)throw new Error(`${k} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let i=0;i<4;i++){let o=this.ch();if(o>=48&&o<=57)o-=48;else if(o>=97&&o<=102)o=o-97+10;else if(o>=65&&o<=70)o=o-65+10;else throw new Error(`${k} unexpected unicode escape character at position ${this._pos}`);s=s*16+o,this._pos++}return s},a=()=>{const s=this.ch();let i=null,o=s>239?4:s>223?3:s>191?2:1;if(this._pos+o>this.data.length)throw new Error(`${k} unexpected unicode sequence at position ${this._pos}`);let c,u,l,f;switch(o){case 1:s<128&&(i=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(f=(s&31)<<6|c&63,f>127&&(i=f));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(f=(s&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(i=f));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(f=(s&15)<<18|(c&63)<<12|(u&63)<<6|l&63,f>65535&&f<1114112&&(i=f))}i===null?(i=65533,o=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),this._pos+=o};for(;!this.done();){const s=this.ch();let i;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${k} unexpected string termination at position ${this._pos}`);switch(i=this.ch(),this._pos++,i){case 34:case 39:case 92:case 47:n.push(i);break;case 98:n.push(8);break;case 116:n.push(9);break;case 110:n.push(10);break;case 102:n.push(12);break;case 114:n.push(13);break;case 117:n.push(r());break;default:throw new Error(`${k} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new m(d.string,di(n),this._pos-t);default:if(s<32)throw new Error(`${k} invalid control character at position ${this._pos}`);s<128?(n.push(s),this._pos++):a()}}throw new Error(`${k} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new m(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new m(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new m(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new m(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new m(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${k} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new m(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${k} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new m(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new m(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${k} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new m(d.break,void 0,1);const t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${k} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${k} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function Mf(e,t){return t=Object.assign({tokenizer:new Si(e,t)},t),vi(e,t)}function Lf(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function zf(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=E.asCID(e);if(!t)return null;const n=t.toString();return[new m(d.map,1/0,1),new m(d.string,"/",1),new m(d.string,n,n.length),new m(d.break,void 0,1)]}function Zn(e){const t=or.encode(e).slice(1);return[new m(d.map,1/0,1),new m(d.string,"/",1),new m(d.map,1/0,1),new m(d.string,"bytes",5),new m(d.string,t,t.length),new m(d.break,void 0,1),new m(d.break,void 0,1)]}function _e(e){return Zn(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Ff(e){return Zn(new Uint8Array(e))}function Vf(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Zf(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Gf={typeEncoders:{Object:zf,Buffer:Zn,Uint8Array:Zn,Int8Array:_e,Uint16Array:_e,Int16Array:_e,Uint32Array:_e,Int32Array:_e,Float32Array:_e,Float64Array:_e,Uint8ClampedArray:_e,BigInt64Array:_e,BigUint64Array:_e,DataView:_e,ArrayBuffer:Ff,undefined:Vf,number:Zf}};class qf extends Si{constructor(t,n){super(t,n),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const t=this._next();if(t.type===d.map){const n=this._next();if(n.type===d.string&&n.value==="/"){const r=this._next();if(r.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new m(d.tag,42,0)}if(r.type===d.map){const a=this._next();if(a.type===d.string&&a.value==="bytes"){const s=this._next();if(s.type===d.string){for(let o=0;o<2;o++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");const i=or.decode(`m${s.value}`);return new m(d.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(a)}this.tokenBuffer.push(r)}this.tokenBuffer.push(n)}return t}}const Mr={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Mr.tags[42]=E.parse;const Hf="dag-json",Wf=297,ki=e=>Uf(e,Gf),Pi=e=>{const t=Lf(e),n=Object.assign(Mr,{tokenizer:new qf(t,Mr)});return Mf(t,n)},Ja=e=>Kf.decode(ki(e)),Kf=new TextDecoder,Jf=e=>Pi(Qf.encode(e)),Qf=new TextEncoder,Xf=Object.freeze(Object.defineProperty({__proto__:null,code:Wf,decode:Pi,encode:ki,format:Ja,name:Hf,parse:Jf,stringify:Ja},Symbol.toStringTag,{value:"Module"})),Yf=new TextDecoder;function wa(e,t){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const a=e[t++];if(n+=r<28?(a&127)<<r:(a&127)*2**r,a<128)break}return[n,t]}function Gn(e,t){let n;[n,t]=wa(e,t);const r=t+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function Ai(e,t){let n;return[n,t]=wa(e,t),[n&7,n>>3,t]}function eh(e){const t={},n=e.length;let r=0;for(;r<n;){let a,s;if([a,s,r]=Ai(e,r),s===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(a!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${a}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,r]=Gn(e,r)}else if(s===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(a!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${a}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,r]=Gn(e,r),t.Name=Yf.decode(i)}else if(s===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(a!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${a}) for Tsize`);[t.Tsize,r]=wa(e,r)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function th(e){const t=e.length;let n=0,r,a=!1,s;for(;n<t;){let o,c;if([o,c,n]=Ai(e,n),o!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${o}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,n]=Gn(e,n),r&&(a=!0)}else if(c===2){if(a)throw new Error("protobuf: (PBNode) duplicate Links section");r||(r=[]);let u;[u,n]=Gn(e,n),r.push(eh(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(n>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return s&&(i.Data=s),i.Links=r||[],i}const Ii=new TextEncoder,Qa=2**32,nh=2**31;function rh(e,t){let n=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");n=Wt(t,n,e.Tsize)-1,t[n]=24}if(typeof e.Name=="string"){const r=Ii.encode(e.Name);n-=r.length,t.set(r,n),n=Wt(t,n,r.length)-1,t[n]=18}return e.Hash&&(n-=e.Hash.length,t.set(e.Hash,n),n=Wt(t,n,e.Hash.length)-1,t[n]=10),t.length-n}function ah(e){const t=ih(e),n=new Uint8Array(t);let r=t;if(e.Data&&(r-=e.Data.length,n.set(e.Data,r),r=Wt(n,r,e.Data.length)-1,n[r]=10),e.Links)for(let a=e.Links.length-1;a>=0;a--){const s=rh(e.Links[a],n.subarray(0,r));r-=s,r=Wt(n,r,s)-1,n[r]=18}return n}function sh(e){let t=0;if(e.Hash){const n=e.Hash.length;t+=1+n+bt(n)}if(typeof e.Name=="string"){const n=Ii.encode(e.Name).length;t+=1+n+bt(n)}return typeof e.Tsize=="number"&&(t+=1+bt(e.Tsize)),t}function ih(e){let t=0;if(e.Data){const n=e.Data.length;t+=1+n+bt(n)}if(e.Links)for(const n of e.Links){const r=sh(n);t+=1+r+bt(r)}return t}function Wt(e,t,n){t-=bt(n);const r=t;for(;n>=nh;)e[t++]=n&127|128,n/=128;for(;n>=128;)e[t++]=n&127|128,n>>>=7;return e[t]=n,r}function bt(e){return e%2===0&&e++,Math.floor((oh(e)+6)/7)}function oh(e){let t=0;return e>=Qa&&(e=Math.floor(e/Qa),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+ch[e]}const ch=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],uh=["Data","Links"],dh=["Hash","Name","Tsize"],Lr=new TextEncoder;function $i(e,t){if(e===t)return 0;const n=e.Name?Lr.encode(e.Name):[],r=t.Name?Lr.encode(t.Name):[];let a=n.length,s=r.length;for(let i=0,o=Math.min(a,s);i<o;++i)if(n[i]!==r[i]){a=n[i],s=r[i];break}return a<s?-1:s<a?1:0}function Xa(e,t){return!Object.keys(e).some(n=>!t.includes(n))}function Ci(e){if(typeof e.asCID=="object"){const n=E.asCID(e);if(!n)throw new TypeError("Invalid DAG-PB form");return{Hash:n}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let n=E.asCID(e.Hash);try{n||(typeof e.Hash=="string"?n=E.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=E.decode(e.Hash)))}catch(r){throw new TypeError(`Invalid DAG-PB form: ${r.message}`)}n&&(t.Hash=n)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function Ni(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=Lr.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(Ci),t.Links.sort($i);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Oi(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Xa(e,uh))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const n=e.Links[t];if(!n||typeof n!="object"||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Xa(n,dh))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(n.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash==null||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(n.Name!==void 0&&typeof n.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(n.Tsize!==void 0){if(typeof n.Tsize!="number"||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&$i(n,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function lh(e,t=[]){return Ni({Data:e,Links:t})}function fh(e,t,n){return Ci({Hash:n,Name:e,Tsize:t})}function hh(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const ph="dag-pb",yh=112;function mh(e){Oi(e);const t={};return e.Links&&(t.Links=e.Links.map(n=>{const r={};return n.Hash&&(r.Hash=n.Hash.bytes),n.Name!==void 0&&(r.Name=n.Name),n.Tsize!==void 0&&(r.Tsize=n.Tsize),r})),e.Data&&(t.Data=e.Data),ah(t)}function gh(e){const t=hh(e),n=th(t),r={};return n.Data&&(r.Data=n.Data),n.Links&&(r.Links=n.Links.map(a=>{const s={};try{s.Hash=E.decode(a.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return a.Name!==void 0&&(s.Name=a.Name),a.Tsize!==void 0&&(s.Tsize=a.Tsize),s})),r}const wh=Object.freeze(Object.defineProperty({__proto__:null,code:yh,createLink:fh,createNode:lh,decode:gh,encode:mh,name:ph,prepare:Ni,validate:Oi},Symbol.toStringTag,{value:"Module"}));function De(e){return Ct.encode(e).slice(1)}function ke(e){return Ct.decode(`u${e}`)}function bh(e){const[t,n,r]=e;return{payload:n,signatures:[{protected:t,signature:r}],link:E.decode(ke(n))}}function vh(e){const t={signature:ke(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=ke(e.protected)),t}function _h(e){return{payload:ke(e.payload),signatures:e.signatures.map(vh)}}function xh(e){const t={signature:De(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=De(e.protected)),t}function Eh(e){const t={payload:De(e.payload),signatures:e.signatures.map(xh)};try{return t.pld=zr(Sh(e.payload)),t}catch{try{return t.link=E.decode(new Uint8Array(e.payload)),t}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function zr(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return E.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(zr);if(Th(e)){const t={};for(const n in e)t[n]=zr(e[n]);return t}}return e}function Th(e){return typeof e=="object"&&e!==null}function Sh(e){return JSON.parse(new TextDecoder().decode(e))}function kh(e){const[t,n,r,a,s]=e,i={ciphertext:a,iv:r,protected:t,tag:s};return n&&(i.recipients=[{encrypted_key:n}]),i}function Ph(e){const t={};return e.encrypted_key&&(t.encrypted_key=ke(e.encrypted_key)),e.header&&(t.header=e.header),t}function Ah(e){const t={ciphertext:ke(e.ciphertext),protected:ke(e.protected),iv:ke(e.iv),tag:ke(e.tag)};return e.aad&&(t.aad=ke(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Ph)),e.unprotected&&(t.unprotected=e.unprotected),t}function Ih(e){const t={};return e.encrypted_key&&(t.encrypted_key=De(e.encrypted_key)),e.header&&(t.header=e.header),t}function $h(e){const t={ciphertext:De(e.ciphertext),protected:De(e.protected),iv:De(e.iv),tag:De(e.tag)};return e.aad&&(t.aad=De(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Ih)),e.unprotected&&(t.unprotected=e.unprotected),t}const Ch="dag-jose",Nh=133;function Ri(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function Oh(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function Rh(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function Bi(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function Di(e){if(typeof e=="string"){const t=e.split(".");if(t.length===3)return bh(t);if(t.length===5)return kh(t);throw new Error("Not a valid JOSE string")}if(Ri(e)||Bi(e))return e;throw new Error("Not a valid unencoded JOSE object")}function Bh(e){typeof e=="string"&&(e=Di(e));let t;if(Ri(e))t=_h(e);else if(Bi(e))t=Ah(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Ei(t))}function Dh(e){let t;try{t=Ti(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Oh(t))return Eh(t);if(Rh(t))return $h(t);throw new Error("Not a valid DAG-JOSE object")}const jh=Object.freeze(Object.defineProperty({__proto__:null,code:Nh,decode:Dh,encode:Bh,name:Ch,toGeneral:Di},Symbol.toStringTag,{value:"Module"}));function Ue(e){const t=new globalThis.AbortController;function n(){t.abort();for(const s of e)(s==null?void 0:s.removeEventListener)!=null&&s.removeEventListener("abort",n)}for(const s of e){if((s==null?void 0:s.aborted)===!0){n();break}(s==null?void 0:s.addEventListener)!=null&&s.addEventListener("abort",n)}function r(){for(const s of e)(s==null?void 0:s.removeEventListener)!=null&&s.removeEventListener("abort",n)}const a=t.signal;return a.clear=r,a}const Uh="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Mh=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Uh[n[e]&63];return t};function Lh(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var zh=Lh;const Fh=ar(zh),ji=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,ba=Fh(),fr=ji&&!ba,Vh=ba&&ji,Zh=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!ba,hr=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*pr(e,t={}){const n=e.getReader();try{for(;;){const r=await n.read();if(r.done)return;yield r.value}}finally{t.preventCancel!==!0&&await n.cancel(),n.releaseLock()}}function Ya(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}function Gh(e,t,n){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");n||(n={}),typeof t=="object"&&(n=t,t=""),t&&(n.code=t);try{return Ya(e,n)}catch{n.message=e.message,n.stack=e.stack;const a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(e)),Ya(new a,n)}}var qh=Gh;const Pe=ar(qh);function yr(e){const[t,n]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:a=>{r.push(a)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}}function Hh(e){return e[Symbol.asyncIterator]!=null}function es(e,t){let n=0;if(Hh(e))return async function*(){for await(const c of e)yield t(c,n++)}();const r=yr(e),{value:a,done:s}=r.next();if(s===!0)return function*(){}();const i=t(a,n++);if(typeof i.then=="function")return async function*(){yield await i;for await(const c of r)yield t(c,n++)}();const o=t;return function*(){yield i;for(const c of r)yield o(c,n++)}()}function Tt(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function qn(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Fr(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function Hn(e){return typeof(e==null?void 0:e.getReader)=="function"}function Ui(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function Wh(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function Kh(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function Jh(e){return Array.isArray(e)}function mr(e){if(e!=null){if(Wh(e)&&(e={secs:e.secs,nsecs:e.nsecs}),Kh(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),Jh(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const t=e.getTime(),n=Math.floor(t/1e3);e={secs:BigInt(n),nsecs:(t-n*1e3)*1e3}}if(typeof e=="bigint"){const t=e/BigInt(1e9),n=e-t*BigInt(1e9);e={secs:t,nsecs:Number(n)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new Ze("mtime-nsecs must be within the range [0,999999999]","ERR_INVALID_MTIME_NSECS");return e}}}async function*Qh(e,t){if(typeof e=="string"||e instanceof String||Tt(e)||qn(e)||e._readableState!=null)throw Pe(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Hn(e)&&(e=pr(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=yr(e),{value:r,done:a}=await n.peek();if(a===!0){yield*[];return}if(n.push(r),Number.isInteger(r))throw Pe(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState!=null){yield*es(n,async s=>Sr({content:s},t));return}if(Tt(r)){yield Sr({content:n},t);return}if(Fr(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||Hn(r)||qn(r)){yield*es(n,async s=>Sr(s,t));return}}throw Fr(e)?Pe(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Pe(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Sr(e,t){const{path:n,mode:r,mtime:a,content:s}=e,i={path:n??"",mode:Ui(r),mtime:mr(a)};return s!=null?i.content=await t(s):n==null&&(i.content=await t(e)),i}function Xh(e){return e[Symbol.asyncIterator]!=null}function Mi(e){if(Xh(e))return(async()=>{const n=[];for await(const r of e)n.push(r);return n})();const t=[];for(const n of e)t.push(n);return t}async function Li(e){if(Tt(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(qn(e))return e;if(Hn(e)&&(e=pr(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=yr(e),{value:n,done:r}=await t.peek();if(r===!0)return ts(t);if(t.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await Mi(t))]);if(Tt(n)||typeof n=="string"||n instanceof String)return ts(t)}throw new Ze(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT")}async function ts(e){const t=[];for await(const n of e)t.push(n);return new Blob(t)}function Yh(e){return Qh(e,Li)}function va(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function ns(e,t,n={},r){const a=[],s=new FormData;let i=0,o=0;for await(const{content:c,path:u,mode:l,mtime:f}of Yh(e)){let _="";const g=c!=null?"file":"dir";i>0&&(_=`-${i}`);let b=g+_;const S=[];if(l!=null&&S.push(`mode=${va(l)}`),f!=null){const{secs:I,nsecs:B}=f;S.push(`mtime=${I}`),B!=null&&S.push(`mtime-nsecs=${B}`)}if(S.length>0&&(b=`${b}?${S.join("&")}`),c!=null){s.set(b,c,u!=null?encodeURIComponent(u):void 0);const I=o+c.size;a.push({name:u,start:o,end:I}),o=I}else if(u!=null)s.set(b,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");i++}return{total:o,parts:a,headers:n,body:s}}async function Ye(e,t,n={},r=`-----------------------------${Mh()}`){let a=ns;return Vh&&(a=ns),a(e,t,n,r)}function te(e){if(e==null)return e;const t=/^[A-Z]+$/,n={};return Object.keys(e).reduce((r,a)=>(t.test(a)?r[a.toLowerCase()]=e[a]:t.test(a[0])?r[a[0].toLowerCase()+a.slice(1)]=e[a]:r[a]=e[a],r),n)}function y({arg:e,searchParams:t,hashAlg:n,mtime:r,mode:a,...s}={}){t!=null&&(s={...s,...t}),n!=null&&(s.hash=n),r!=null&&(r=mr(r),s.mtime=r.secs,s.mtimeNsecs=r.nsecs),a!=null&&(s.mode=va(a)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const i=new URLSearchParams(s);return e.forEach(o=>{i.append("arg",o)}),i}function zi(e){return async function*(n,r={}){const a=new AbortController,s=Ue([a.signal,r.signal]);try{const{headers:i,body:o,total:c,parts:u}=await Ye(n,a,r.headers),[l,f]=typeof r.progress=="function"?ep(c,r.progress,u):[void 0,void 0],_=await e.post("add",{searchParams:y({"stream-channels":!0,...r,progress:!!l}),onUploadProgress:f,signal:s,headers:i,body:o});for await(let g of _.ndjson())g=te(g),g.hash!==void 0?yield np(g):l!=null&&l(g.bytes??0,g.name)}finally{s.clear()}}}const ep=(e,t,n)=>n!=null?[void 0,tp(e,n,t)]:[t,void 0],tp=(e,t,n)=>{let r=0;const a=t.length;return({loaded:s,total:i})=>{const o=Math.floor(s/i*e);for(;r<a;){const{start:c,end:u,name:l}=t[r];if(o<u){n(o-c,l);break}else n(u-c,l),r+=1}}};function np({name:e,hash:t,size:n,mode:r,mtime:a,mtimeNsecs:s}){const i={path:e,cid:E.parse(t),size:parseInt(n)};return r!=null&&(i.mode=parseInt(r,8)),a!=null&&(i.mtime={secs:a,nsecs:s??0}),i}function rp(e){return e[Symbol.asyncIterator]!=null}function gr(e){if(rp(e))return(async()=>{let n;for await(const r of e)n=r;return n})();let t;for(const n of e)t=n;return t}async function*ap(e,t){if(e==null)throw Pe(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield Pn(e.toString(),t);return}if(Tt(e)||qn(e)){yield Pn(e,t);return}if(Hn(e)&&(e=pr(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=yr(e),{value:r,done:a}=await n.peek();if(a===!0){yield{content:[]};return}if(n.push(r),Number.isInteger(r)||Tt(r)||typeof r=="string"||r instanceof String){yield Pn(n,t);return}throw Pe(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Fr(e)){yield Pn(e,t);return}throw Pe(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Pn(e,t){const{path:n,mode:r,mtime:a,content:s}=e,i={path:n??"",mode:Ui(r),mtime:mr(a)};return s!=null?i.content=await t(s):n==null&&(i.content=await t(e)),i}function sp(e){return ap(e,Li)}function ip(e){const t=zi(e);return async function(r,a={}){const s=sp(r),i=t(s,a),o=await gr(i);if(o==null)throw new Error("Invalid body");return o}}const op=Symbol.for("nodejs.util.inspect.custom"),cp=Object.values(xt).map(e=>e.decoder).reduce((e,t)=>e.or(t),xt.identity.decoder),Fi=114,Vi=36,Zi=37;var u0;class _a{constructor(t){h(this,"type");h(this,"multihash");h(this,"privateKey");h(this,"publicKey");h(this,"string");h(this,u0,!0);this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=ue.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return E.createV1(Fi,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){var n;if(t==null)return!1;if(t instanceof Uint8Array)return Rr(this.multihash.bytes,t);if(typeof t=="string")return ce(t).equals(this);if(((n=t==null?void 0:t.multihash)==null?void 0:n.bytes)!=null)return Rr(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[(u0=Jc,op)](){return`PeerId(${this.toString()})`}}class xa extends _a{constructor(n){super({...n,type:"RSA"});h(this,"type","RSA");h(this,"publicKey");this.publicKey=n.publicKey}}class Ea extends _a{constructor(n){super({...n,type:"Ed25519"});h(this,"type","Ed25519");h(this,"publicKey");this.publicKey=n.multihash.digest}}class Ta extends _a{constructor(n){super({...n,type:"secp256k1"});h(this,"type","secp256k1");h(this,"publicKey");this.publicKey=n.multihash.digest}}function ce(e,t){if(e.charAt(0)==="1"||e.charAt(0)==="Q"){const n=ir(ue.decode(`z${e}`));return e.startsWith("12D")?new Ea({multihash:n}):e.startsWith("16U")?new Ta({multihash:n}):new xa({multihash:n})}return up(cp.decode(e))}function up(e){try{const t=ir(e);if(t.code===Qt.code){if(t.digest.length===Vi)return new Ea({multihash:t});if(t.digest.length===Zi)return new Ta({multihash:t})}if(t.code===ea.code)return new xa({multihash:t})}catch{return dp(E.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function dp(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==Fi)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===ea.code)return new xa({multihash:e.multihash});if(t.code===Qt.code){if(t.digest.length===Vi)return new Ea({multihash:e.multihash});if(t.digest.length===Zi)return new Ta({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}function Gi(e){return async function(n={}){const r=await e.post("bitswap/stat",{searchParams:y(n),signal:n.signal,headers:n.headers});return lp(await r.json())}}function lp(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(t=>E.parse(t["/"])),peers:(e.Peers??[]).map(t=>ce(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function fp(e){return async function(n,r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:y({...r,peer:n.toString()}),headers:r.headers})).json()).Keys??[]).map(s=>E.parse(s["/"]))}}function hp(e){return async function(n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()).Keys??[]).map(a=>E.parse(a["/"]))}}function pp(e){return{wantlist:hp(e),wantlistForPeer:fp(e),stat:Gi(e)}}function qi(e){return async function(n,r={}){const a=await e.post("block/get",{signal:r.signal,searchParams:y({arg:n.toString(),...r}),headers:r.headers});return new Uint8Array(await a.arrayBuffer())}}function yp(e){return async function t(n,r={}){const a=new AbortController,s=Ue([a.signal,r.signal]);let i;try{i=await(await e.post("block/put",{signal:s,searchParams:y(r),...await Ye([n],a,r.headers)})).json()}catch(o){if(r.format==="dag-pb")return await t(n,{...r,format:"protobuf"});if(r.format==="dag-cbor")return await t(n,{...r,format:"cbor"});throw o}finally{s.clear()}return E.parse(i.Key)}}function mp(e){return async function*(n,r={}){Array.isArray(n)||(n=[n]);const a=await e.post("block/rm",{signal:r.signal,searchParams:y({arg:n.map(s=>s.toString()),"stream-channels":!0,...r}),headers:r.headers});for await(const s of a.ndjson())yield gp(s)}}function gp(e){const t={cid:E.parse(e.Hash)};return e.Error!=null&&(t.error=new Error(e.Error)),t}function wp(e){return async function(n,r={}){const s=await(await e.post("block/stat",{signal:r.signal,searchParams:y({arg:n.toString(),...r}),headers:r.headers})).json();return{cid:E.parse(s.Key),size:s.Size}}}function bp(e){return{get:qi(e),put:yp(e),rm:mp(e),stat:wp(e)}}function vp(e){return async function(n,r={}){const a=await e.post("bootstrap/add",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers}),{Peers:s}=await a.json();return{Peers:s.map(i=>le(i))}}}function _p(e){return async function(n={}){const r=await e.post("bootstrap/list",{signal:n.signal,searchParams:y(n),headers:n.headers}),{Peers:a}=await r.json();return{Peers:a.map(s=>le(s))}}}function xp(e){return async function(n,r={}){const a=await e.post("bootstrap/rm",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers}),{Peers:s}=await a.json();return{Peers:s.map(i=>le(i))}}}function Ep(e){return{add:vp(e),list:_p(e),rm:xp(e)}}function Tp(e){return async function*(n,r={}){yield*(await e.post("cat",{signal:r.signal,searchParams:y({arg:n.toString(),...r}),headers:r.headers})).iterator()}}function Sp(e){return async function(n={}){return(await e.post("commands",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()}}function kp(e){return async function(n={}){return await(await e.post("config/show",{signal:n.signal,searchParams:y({...n}),headers:n.headers})).json()}}function Pp(e){return async function(n,r={}){if(n==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).json()).Value}}function Ap(e){return async function(n,r={}){const s=await(await e.post("config/profile/apply",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}}function Ip(e){return{apply:Ap(e)}}function $p(e){return async function(n,r={}){const a=new AbortController,s=Ue([a.signal,r.signal]);try{await(await e.post("config/replace",{signal:s,searchParams:y(r),...await Ye([xn(JSON.stringify(n))],a,r.headers)})).text()}finally{s.clear()}}}function Cp(e){return async function(n,r,a={}){if(typeof n!="string")throw new Error("Invalid key type");const s={...a,...Np(n,r)};await(await e.post("config",{signal:a.signal,searchParams:y(s),headers:a.headers})).text()}}function Np(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function Op(e){return{getAll:kp(e),get:Pp(e),set:Cp(e),replace:$p(e),profiles:Ip(e)}}function Rp(e){return async function*(n,r={}){yield*(await e.post("dag/export",{signal:r.signal,searchParams:y({arg:n.toString()}),headers:r.headers})).iterator()}}function Bp(e){return e[Symbol.asyncIterator]!=null}function Dp(e){if(Bp(e))return(async()=>{for await(const t of e)return t})();for(const t of e)return t}async function*rs(e,t,n,r,a){const s=async u=>{const l=await n.getCodec(u.code),f=await r(u,a);return l.decode(f)},i=t.split("/").filter(Boolean);let o=await s(e),c=e;for(;i.length>0;){const u=i.shift();if(u==null)throw Pe(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(o,u))o=o[u],yield{value:o,remainderPath:i.join("/")};else throw Pe(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=E.asCID(o);l!=null&&(c=l,o=await s(o))}yield{value:o,remainderPath:""}}function jp(e,t){const n=qi(e);return async function(a,s={}){if(s.path!=null){const l=s.localResolve===!0?await Dp(rs(a,s.path,t,n,s)):await gr(rs(a,s.path,t,n,s));if(l==null)throw Pe(new Error("Not found"),"ERR_NOT_FOUND");return l}const i=await t.getCodec(a.code),o=await n(a,s);return{value:i.decode(o),remainderPath:""}}}function Up(e){return async function*(n,r={}){const a=new AbortController,s=Ue([a.signal,r.signal]);try{const{headers:i,body:o}=await Ye(n,a,r.headers),c=await e.post("dag/import",{signal:s,headers:i,body:o,searchParams:y({"pin-roots":r.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:f}=u;yield{root:{cid:E.parse(l),pinErrorMsg:f}}}}finally{s.clear()}}}function Mp(e,t){return async function(r,a={}){const s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...a};let i;if(s.inputCodec!=null){if(!(r instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=r}else i=(await t.getCodec(s.storeCodec??"dag-cbor")).encode(r),s.inputCodec=s.storeCodec;const o=new AbortController,c=Ue([o.signal,s.signal]);try{const l=await(await e.post("dag/put",{timeout:s.timeout,signal:c,searchParams:y(s),...await Ye([i],o,s.headers)})).json();return E.parse(l.Cid["/"])}finally{c.clear()}}}function Lp(e){return async function(n,r={}){const s=await(await e.post("dag/resolve",{signal:r.signal,searchParams:y({arg:`${n}${r.path!=null?`/${r.path}`.replace(/\/[/]+/g,"/"):""}`,...r}),headers:r.headers})).json();return{cid:E.parse(s.Cid["/"]),remainderPath:s.RemPath}}}function zp(e,t){return{export:Rp(e),get:jp(e,t),import:Up(e),put:Mp(e,t),resolve:Lp(e)}}const Fp=0,Vp=1,Zp=2,Gp=3,qp=4,Hp=5,Wp=6,Kp=7;function Dt(e){var t;if(e.Type===Fp)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Vp)return{from:ce(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:n,Addrs:r})=>({id:ce(n),multiaddrs:r.map(a=>le(a)),protocols:[]})),providers:(e.Responses??[]).map(({ID:n,Addrs:r})=>({id:ce(n),multiaddrs:r.map(a=>le(a)),protocols:[]}))};if(e.Type===Zp){let n={id:e.ID??ce(e.ID),multiaddrs:[],protocols:[]};return((t=e.Responses)==null?void 0:t.length)>0&&(n={id:ce(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>le(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:n}}if(e.Type===Gp)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===qp)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:n,Addrs:r})=>({id:ce(n),multiaddrs:r.map(a=>le(a)),protocols:[]}))};if(e.Type===Hp)return{name:"VALUE",type:e.Type,value:xn(e.Extra,"base64pad")};if(e.Type===Wp){const n=e.Responses.map(({ID:r})=>ce(r));if(n.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:n[0]}}if(e.Type===Kp)return{name:"DIALING_PEER",type:e.Type,peer:ce(e.ID)};throw new Error("Unknown DHT event type")}function Jp(e){return async function*(n,r={}){const a=await e.post("dht/query",{signal:r.signal,searchParams:y({arg:n.toString(),...r}),headers:r.headers});for await(const s of a.ndjson())yield Dt(s)}}var as;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(as||(as={}));var ss;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(ss||(ss={}));function Qp(e){return{query:Jp(e)}}function Xp(e){return async function(n={}){return(await e.post("diag/cmds",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()}}function Yp(e){return async function(n={}){return(await e.post("diag/net",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()}}function ey(e){return async function(n={}){return(await e.post("diag/sys",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()}}function ty(e){return{cmds:Xp(e),net:Yp(e),sys:ey(e)}}function ny(e){return async function(n,r,a={}){const s=Array.isArray(n)?n:[n];await(await e.post("files/cp",{signal:a.signal,searchParams:y({arg:s.concat(r).map(o=>E.asCID(o)!=null?`/ipfs/${o}`:o),...a}),headers:a.headers})).text()}}function ry(e){return async function(n,r={}){if(typeof n!="string")throw new Error("ipfs.files.flush requires a path");const s=await(await e.post("files/flush",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).json();return E.parse(s.Cid)}}function Vr(e){const t=te(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function ay(e){return async function*(n,r={}){if(n==null)throw new Error("ipfs.files.ls requires a path");const a=await e.post("files/ls",{signal:r.signal,searchParams:y({arg:E.asCID(n)!=null?`/ipfs/${n}`:n,long:!0,...r,stream:!0}),headers:r.headers});for await(const s of a.ndjson())if("Entries"in s)for(const i of s.Entries??[])yield is(Vr(i));else yield is(Vr(s))}}function is(e){return e.hash!=null&&(e.cid=E.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function sy(e){return async function(n,r={}){await(await e.post("files/mkdir",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).text()}}function iy(e){return async function(n,r,a={}){Array.isArray(n)||(n=[n]),await(await e.post("files/mv",{signal:a.signal,searchParams:y({arg:n.concat(r),...a}),headers:a.headers})).text()}}function oy(e){if(uy(e))return async function*(){const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)return;yield r}}finally{t.releaseLock()}}();if(cy(e))return e;throw new Error("unknown stream")}function cy(e){return e[Symbol.asyncIterator]!=null}function uy(e){return typeof(e==null?void 0:e.getReader)=="function"}function dy(e){return async function*(n,r={}){const a=await e.post("files/read",{signal:r.signal,searchParams:y({arg:n,count:r.length,...r}),headers:r.headers});if(a.body==null)throw new Error("Invalid response body");yield*oy(a.body)}}let ly=class extends Error{constructor(n){super(n.statusText);h(this,"response");this.name="HTTPError",this.response=n}};function fy(e){return async function(n,r={}){const a=await e.post("files/rm",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers}),s=await a.text();if(s!==""){const i=new ly(a);throw i.message=s,i}}}function Hi(e){return async function(n,r={}){const s=await(await e.post("files/stat",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).json();return s.WithLocality=s.WithLocality??!1,hy(Vr(s))}}function hy(e){return e.cid=E.parse(e.hash),delete e.hash,e}function py(e){return async function(n,r,a={}){const s=new AbortController,i=Ue([s.signal,a.signal]);try{await(await e.post("files/write",{signal:i,searchParams:y({arg:n,streamChannels:!0,count:a.length,...a}),...await Ye([{content:r,path:"arg",mode:va(a.mode),mtime:mr(a.mtime)}],s,a.headers)})).text()}finally{i.clear()}}}function yy(e){return{cp:ny(e),flush:ry(e),ls:ay(e),mkdir:sy(e),mv:iy(e),read:dy(e),rm:fy(e),stat:Hi(e),write:py(e)}}function my(e){return function(){const n=new URL(e.opts.base??"");return{host:n.hostname,port:n.port,protocol:n.protocol,pathname:n.pathname,"api-path":n.pathname}}}function gy(e){return async function*(n,r={}){const a={arg:`${n instanceof Uint8Array?E.decode(n):n}`,...r};yield*(await e.post("get",{signal:r.signal,searchParams:y(a),headers:r.headers})).iterator()}}function Wi(e){return async function(n={}){const a=await(await e.post("id",{signal:n.signal,searchParams:y({arg:n.peerId!=null?n.peerId.toString():void 0,...n}),headers:n.headers})).json(),s={...te(a)};return s.id=ce(s.id),s.addresses!=null&&(s.addresses=s.addresses.map(i=>le(i))),s}}function wy(e){const t=Wi(e);return async function(r={}){var a;try{const s=await t(r);return!!((a=s==null?void 0:s.addresses)!=null&&a.length)}catch{return!1}}}const by={type:"ed25519"};function vy(e){return async function(n,r=by){const s=await(await e.post("key/gen",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).json();return te(s)}}function _y(e){return async function(n,r,a,s={}){const o=await(await e.post("key/import",{signal:s.signal,searchParams:y({arg:n,pem:r,password:a,...s}),headers:s.headers})).json();return te(o)}}function xy(e){return async function(n={}){return((await(await e.post("key/list",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()).Keys??[]).map(s=>te(s))}}function Ey(e){return async function(n,r,a={}){const s=await e.post("key/rename",{signal:a.signal,searchParams:y({arg:[n,r],...a}),headers:a.headers});return te(await s.json())}}function Ty(e){return async function(n,r={}){const s=await(await e.post("key/rm",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers})).json();return te(s.Keys[0])}}function Sy(e){return{gen:vy(e),import:_y(e),list:xy(e),rename:Ey(e),rm:Ty(e)}}be.formatters.b=e=>e==null?"undefined":ue.baseEncode(e);be.formatters.t=e=>e==null?"undefined":Ge.baseEncode(e);be.formatters.m=e=>e==null?"undefined":or.baseEncode(e);be.formatters.p=e=>e==null?"undefined":e.toString();be.formatters.c=e=>e==null?"undefined":e.toString();be.formatters.k=e=>e==null?"undefined":e.toString();be.formatters.a=e=>e==null?"undefined":e.toString();function ky(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function Sa(e){let t=ky(`${e}:trace`);return be.enabled(`${e}:trace`)&&be.names.map(n=>n.toString()).find(n=>n.includes(":trace"))!=null&&(t=be(`${e}:trace`)),Object.assign(be(e),{error:be(`${e}:error`),trace:t})}var Py=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype};const Wn=Py,{hasOwnProperty:Ki}=Object.prototype,{propertyIsEnumerable:Ay}=Object,St=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0}),Iy=pc,os={concatArrays:!1,ignoreUndefined:!1},wr=e=>{const t=[];for(const n in e)Ki.call(e,n)&&t.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(e);for(const r of n)Ay.call(e,r)&&t.push(r)}return t};function jt(e){return Array.isArray(e)?$y(e):Wn(e)?Cy(e):e}function $y(e){const t=e.slice(0,0);return wr(e).forEach(n=>{St(t,n,jt(e[n]))}),t}function Cy(e){const t=Object.getPrototypeOf(e)===null?Object.create(null):{};return wr(e).forEach(n=>{St(t,n,jt(e[n]))}),t}const Ji=(e,t,n,r)=>(n.forEach(a=>{typeof t[a]>"u"&&r.ignoreUndefined||(a in e&&e[a]!==Object.getPrototypeOf(e)?St(e,a,Zr(e[a],t[a],r)):St(e,a,jt(t[a])))}),e),Ny=(e,t,n)=>{let r=e.slice(0,0),a=0;return[e,t].forEach(s=>{const i=[];for(let o=0;o<s.length;o++)Ki.call(s,o)&&(i.push(String(o)),s===e?St(r,a++,s[o]):St(r,a++,jt(s[o])));r=Ji(r,s,wr(s).filter(o=>!i.includes(o)),n)}),r};function Zr(e,t,n){return n.concatArrays&&Array.isArray(e)&&Array.isArray(t)?Ny(e,t,n):!Wn(t)||!Wn(e)?jt(t):Ji(e,t,wr(t),n)}var Oy=function(...e){const t=Zr(jt(os),this!==Iy&&this||{},os);let n={_:{}};for(const r of e)if(r!==void 0){if(!Wn(r))throw new TypeError("`"+r+"` is not an Option Object");n=Zr(n,{_:r},t)}return n._};const Qi=ar(Oy);let Ry=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;U.nanosecond=U.ns=1/1e6;U.µs=U.μs=U.us=U.microsecond=1/1e3;U.millisecond=U.ms=U[""]=1;U.second=U.sec=U.s=U.ms*1e3;U.minute=U.min=U.m=U.s*60;U.hour=U.hr=U.h=U.m*60;U.day=U.d=U.h*24;U.week=U.wk=U.w=U.d*7;U.month=U.b=U.d*(365.25/12);U.year=U.yr=U.y=U.d*365.25;function U(e="",t="ms"){var n=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(Ry,function(r,a,s){s=cs(s),s&&(n=(n||0)+parseFloat(a,10)*s)}),n&&n/(cs(t)||1)}function cs(e){return U[e]||U[e.toLowerCase().replace(/s$/,"")]}const By=()=>{},Dy=typeof navigator<"u"&&navigator.product==="ReactNative";function jy(){return Dy?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const Kt=self.URL,Xi=jy();let Uy=class{constructor(t="",n=Xi){this.super=new Kt(t,n),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return Kt.createObjectURL(t)}static revokeObjectURL(t){Kt.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function My(e){if(typeof e=="string")return new Kt(e).toString();if(!(e instanceof Kt)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",n=e.auth?e.auth+"@":"",r=e.port?":"+e.port:"",a=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",o=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+o;return`${a}${t||n}${s||i+r}${l}${c}`}}var Yi={URLWithLegacySupport:Uy,URLSearchParams:self.URLSearchParams,defaultBase:Xi,format:My};const{URLWithLegacySupport:us,format:Ly}=Yi;var zy=(e,t={},n={},r)=>{let a=t.protocol?t.protocol.replace(":",""):"http";a=(n[a]||r||a)+":";let s;try{s=new us(e)}catch{s={}}const i=Object.assign({},t,{protocol:a||s.protocol,host:t.host||s.host});return new us(e,Ly(i)).toString()};const{URLWithLegacySupport:Fy,format:Vy,URLSearchParams:Zy,defaultBase:Gy}=Yi,qy=zy;var An={URL:Fy,URLSearchParams:Zy,format:Vy,relative:qy,defaultBase:Gy};class eo extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}}class Hy extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}}class ds extends Error{constructor(n){super(n.statusText);h(this,"response");this.name="HTTPError",this.response=n}}const Wy=globalThis.fetch,ka=globalThis.Headers,Ky=globalThis.Request,to=globalThis.Response,Jy=async(e,t={})=>{const n=new XMLHttpRequest;n.open(t.method??"GET",e.toString(),!0);const{timeout:r,headers:a}=t,s=Number(r);if(!isNaN(s)&&s>0&&s<1/0&&(n.timeout=s),t.overrideMimeType!=null&&n.overrideMimeType(t.overrideMimeType),a!=null)for(const[i,o]of new ka(a))n.setRequestHeader(i,o);return t.signal!=null&&(t.signal.onabort=()=>{n.abort()}),t.onUploadProgress!=null&&(n.upload.onprogress=t.onUploadProgress),n.responseType="arraybuffer",new Promise((i,o)=>{const c=u=>{switch(u.type){case"error":{i(to.error());break}case"load":{i(new em(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:Yy(n.getAllResponseHeaders())}));break}case"timeout":{o(new eo);break}case"abort":{o(new Hy);break}}};n.onerror=c,n.onload=c,n.ontimeout=c,n.onabort=c,n.send(t.body)})},Qy=Wy,Xy=(e,t={})=>t.onUploadProgress!=null?Jy(e,t):Qy(e,t),Yy=e=>{const t=new ka;for(const n of e.trim().split(/[\r\n]+/)){const r=n.indexOf(": ");r>0&&t.set(n.slice(0,r),n.slice(r+1))}return t};class em extends to{constructor(t,n,r){super(n,r),Object.defineProperty(this,"url",{value:t})}}const ls=Qi.bind({ignoreUndefined:!0}),In=Sa("kubo-rpc-client:fetch"),tm={throwHttpErrors:!0,credentials:"same-origin"},oe=class oe{constructor(t={}){h(this,"opts");this.opts=ls({},tm,t)}async fetch(t,n={}){const r=ls({},this.opts,n),a=new ka(r.headers);if(typeof t!="string"&&!(t instanceof An.URL||t instanceof Ky))throw new TypeError("`resource` must be a string, URL, or Request");const s=new An.URL(t.toString(),r.base),{searchParams:i,transformSearchParams:o,json:c}=r;i!=null&&(typeof o=="function"?s.search=o(new An.URLSearchParams(r.searchParams)):s.search=new An.URLSearchParams(r.searchParams).toString()),c!=null&&(r.body=JSON.stringify(r.json),a.set("content-type","application/json"));const u=[r.signal];r.timeout!=null&&isNaN(r.timeout)&&r.timeout>0&&u.push(AbortSignal.timeout(r.timeout));const l=Ue(u);try{globalThis.ReadableStream!=null&&r.body instanceof globalThis.ReadableStream&&(fr||hr)&&(r.body=new Blob(await Mi(pr(r.body)))),In.trace("outgoing headers",r.headers),In.trace("%s %s",r.method,s);const f=await Xy(s.toString(),{...r,signal:r.signal,timeout:void 0,headers:a,duplex:"half"});if(In("%s %s %d",r.method,s,f.status),In.trace("incoming headers",f.headers),!f.ok&&r.throwHttpErrors===!0)throw r.handleError!=null&&await r.handleError(f),new ds(f);return f.iterator=async function*(){yield*rm(f.body)},f.ndjson=async function*(){for await(const _ of nm(f.iterator()))n.transform!=null?yield n.transform(_):yield _},f}finally{l.clear()}}async post(t,n={}){return this.fetch(t,{...n,method:"POST"})}async get(t,n={}){return this.fetch(t,{...n,method:"GET"})}async put(t,n={}){return this.fetch(t,{...n,method:"PUT"})}async delete(t,n={}){return this.fetch(t,{...n,method:"DELETE"})}async options(t,n={}){return this.fetch(t,{...n,method:"OPTIONS"})}};h(oe,"HTTPError",ds),h(oe,"TimeoutError",eo),h(oe,"post",async(t,n)=>new oe(n).post(t,n)),h(oe,"get",async(t,n)=>new oe(n).get(t,n)),h(oe,"put",async(t,n)=>new oe(n).put(t,n)),h(oe,"delete",async(t,n)=>new oe(n).delete(t,n)),h(oe,"options",async(t,n)=>new oe(n).options(t,n));let et=oe;const nm=async function*(e){const t=new TextDecoder;let n="";for await(const r of e){n+=t.decode(r,{stream:!0});const a=n.split(/\r?\n/);for(let s=0;s<a.length-1;s++){const i=a[s].trim();i.length>0&&(yield JSON.parse(i))}n=a[a.length-1]}n+=t.decode(),n=n.trim(),n.length!==0&&(yield JSON.parse(n))},rm=e=>{if(am(e))return e;if(im(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(n){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:n})}}}}}if(sm(e)){const t=e.getReader();return async function*(){try{for(;;){const{done:n,value:r}=await t.read();if(n)return;r!=null&&(yield r)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},am=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",sm=e=>e!=null&&typeof e.getReader=="function",im=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),om=[F("tcp").code,F("dns").code,F("dnsaddr").code,F("dns4").code,F("dns6").code];function fs(e){let t;try{t=F("sni").code}catch{return null}for(const[n,r]of e)if(n===t&&r!==void 0)return r;return null}function hs(e){return e.some(([t,n])=>t===F("tls").code)}function pe(e,t,n){const r=no[F(e).name];if(r===void 0)throw new Error(`Can't interpret protocol ${F(e).name}`);const a=r(t,n);return e===F("ip6").code?`[${a}]`:a}const no={ip4:(e,t)=>e,ip6:(e,t)=>t.length===0?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`tcp://${pe(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`udp://${pe(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`${pe(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`${pe(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=hs(t),r=fs(t);if(n&&r!==null)return`https://${r}`;const a=n?"https://":"http://",s=t.pop();if(s===void 0)throw new Error("Unexpected end of multiaddr");let i=pe(s[0],s[1]??"",t);return i=i.replace("tcp://",""),`${a}${i}`},tls:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return pe(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return pe(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");let r=pe(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=hs(t),r=fs(t);if(n&&r!==null)return`wss://${r}`;const a=n?"wss://":"ws://",s=t.pop();if(s===void 0)throw new Error("Unexpected end of multiaddr");let i=pe(s[0],s[1]??"",t);return i=i.replace("tcp://",""),`${a}${i}`},wss:(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");let r=pe(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`${pe(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`${pe(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(n===void 0)throw new Error("Unexpected end of multiaddr");return`${pe(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};function cm(e,t){const r=le(e).stringTuples(),a=r.pop();if(a===void 0)throw new Error("Unexpected end of multiaddr");const s=F(a[0]),i=no[s.name];if(i==null)throw new Error(`No interpreter found for ${s.name}`);let o=i(a[1]??"",r);return om.includes(a[0])&&(o=o.replace(/^.*:\/\//,""),a[1]==="443"?o=`https://${o}`:o=`http://${o}`),(o.startsWith("http://")||o.startsWith("https://"))&&(o=new URL(o).toString(),o.endsWith("/")&&(o=o.substring(0,o.length-1))),o}function ps(e){try{e=cm(le(e))}catch{}return e=e.toString(),e}const ys=Sa("js-kubo-rpc-client:lib:error-handler"),um=Qi.bind({ignoreUndefined:!0}),dm=fr||hr?location.protocol:"http",lm=fr||hr?location.hostname:"localhost",fm=fr||hr?location.port:"5001",hm=(e={})=>{let t,n={},r;if(typeof e=="string"||Mn(e))t=new URL(ps(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||Mn(e.url))t=new URL(ps(e.url)),n=e;else if(e.url instanceof URL)t=e.url,n=e;else{n=e??{};const a=(n.protocol??dm).replace(":",""),s=(n.host??lm).split(":")[0],i=n.port??fm;t=new URL(`${a}://${s}:${i}`)}if(n.apiPath!=null?t.pathname=n.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),Zh){const a=By();r=n.agent??new a({keepAlive:!0,maxSockets:6})}return{...n,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:r}},pm=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const r=await e.json();ys(r),t=r.Message??r.message}else t=await e.text()}catch(r){ys("Failed to parse error response",r),t=r.message}let n=new et.HTTPError(e);throw t!=null&&(t.includes("deadline has elapsed")&&(n=new et.TimeoutError),t.includes("context deadline exceeded")&&(n=new et.TimeoutError),t.includes("request timed out")&&(n=new et.TimeoutError),n.message=t),n},ym=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,ms=e=>e.replace(ym,function(t){return"-"+t.toLowerCase()}),mm=e=>typeof e=="string"?U(e)??0:e;class gm extends et{constructor(t={}){const n=hm(t);super({timeout:n.timeout!=null?mm(n.timeout):void 0,headers:n.headers,base:`${n.url}`,handleError:pm,transformSearchParams:a=>{const s=new URLSearchParams;for(const[i,o]of a)o!=="undefined"&&o!=="null"&&i!=="signal"&&i!=="timeout"&&s.append(ms(i),o),i==="timeout"&&!isNaN(parseInt(o))&&s.append(ms(i),o);return s},agent:n.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=async(a,s={})=>(typeof a=="string"&&!a.startsWith("/")&&(a=`${n.url}/${a}`),r.call(this,a,um(s,{method:"POST"})))}}const wm=async e=>Promise.reject(new Error(`No base found for "${e}"`));class bm{constructor(t){h(this,"_basesByName");h(this,"_basesByPrefix");h(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase??wm;for(const n of t.bases)this.addBase(n)}addBase(t){if(this._basesByName[t.name]!=null&&this._basesByPrefix[t.prefix]!=null)throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t]!=null)return this._basesByName[t];if(this._basesByPrefix[t]!=null)return this._basesByPrefix[t];const n=await this._loadBase(t);return this._basesByName[n.name]==null&&this._basesByPrefix[n.prefix]==null&&this.addBase(n),n}listBases(){return Object.values(this._basesByName)}}const vm=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class _m{constructor(t){h(this,"_codecsByName");h(this,"_codecsByCode");h(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec??vm;for(const n of t.codecs)this.addCodec(n)}addCodec(t){if(this._codecsByName[t.name]!=null||this._codecsByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const n=typeof t=="string"?this._codecsByName:this._codecsByCode;if(n[t]!=null)return n[t];const r=await this._loadCodec(t);return n[t]==null&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}}const xm=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class Em{constructor(t){h(this,"_hashersByName");h(this,"_hashersByCode");h(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher??xm;for(const n of t.hashers)this.addHasher(n)}addHasher(t){if(this._hashersByName[t.name]!=null||this._hashersByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const n=typeof t=="string"?this._hashersByName:this._hashersByCode;if(n[t]!=null)return n[t];const r=await this._loadHasher(t);return n[t]==null&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}}function Tm(e){return async function(t,n,r={}){const a=await e.post("log/level",{signal:r.signal,searchParams:y({arg:[t,n],...r}),headers:r.headers});return te(await a.json())}}function Sm(e){return async function(n={}){return(await(await e.post("log/ls",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()).Strings}}function km(e){return async function*(n={}){yield*(await e.post("log/tail",{signal:n.signal,searchParams:y(n),headers:n.headers})).ndjson()}}function Pm(e){return{level:Tm(e),ls:Sm(e),tail:km(e)}}function Am(e){return async function*(n,r={}){const a=`${n instanceof Uint8Array?E.decode(n):n}`;async function s(o){let c=o.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await Hi(e)(l)).cid}else c=E.parse(c);return{name:o.Name,path:a+(o.Name!=null?`/${o.Name}`:""),size:o.Size,cid:c,type:Im(o)}}const i=await e.post("ls",{signal:r.signal,searchParams:y({arg:a,...r}),headers:r.headers});for await(let o of i.ndjson()){if(o=o.Objects,o==null)throw new Error("expected .Objects in results");if(o=o[0],o==null)throw new Error("expected one array in results.Objects");const c=o.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield s(o);return}yield*c.map(s)}}}function Im(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function $m(e){return async function(n={}){const r=await e.post("dns",{signal:n.signal,searchParams:y(n),headers:n.headers});return te(await r.json())}}function Cm(e){return async function(n,r={}){const a=await e.post("name/publish",{signal:r.signal,searchParams:y({arg:`${n}`,...r}),headers:r.headers});return te(await a.json())}}function Nm(e){return async function(n,r={}){const a=await e.post("name/pubsub/cancel",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers});return te(await a.json())}}function Om(e){return async function(n={}){const r=await e.post("name/pubsub/state",{signal:n.signal,searchParams:y(n),headers:n.headers});return te(await r.json())}}function Rm(e){return async function(n={}){return(await(await e.post("name/pubsub/subs",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()).Strings??[]}}function Bm(e){return{cancel:Nm(e),state:Om(e),subs:Rm(e)}}function Dm(e){return async function*(n,r={}){const a=await e.post("name/resolve",{signal:r.signal,searchParams:y({arg:n,stream:!0,...r}),headers:r.headers});for await(const s of a.ndjson())yield s.Path}}function jm(e){return{publish:Cm(e),resolve:Dm(e),pubsub:Bm(e)}}function Um(e){return async function(n,r,a={}){const s=await e.post("object/patch/add-link",{signal:a.signal,searchParams:y({arg:[`${n}`,r.Name??r.name??"",(r.Hash??r.cid??"").toString()??null],...a}),headers:a.headers}),{Hash:i}=await s.json();return E.parse(i)}}function Mm(e){return async function(n,r,a={}){const s=await e.post("object/patch/rm-link",{signal:a.signal,searchParams:y({arg:[`${n}`,r.Name??r.name??null],...a}),headers:a.headers}),{Hash:i}=await s.json();return E.parse(i)}}function Lm(e){return{addLink:Um(e),rmLink:Mm(e)}}function zm(e,t){return{patch:Lm(e)}}function Fm(e){return Symbol.iterator in e}function Vm(e){return Symbol.asyncIterator in e}function gs(e){return E.asCID(e)!=null}async function*ro(e){if(e==null)throw new Ze(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT");const t=E.asCID(e);if(t!=null){yield se({cid:t});return}if(typeof e=="string"){yield se({path:e});return}if(e.cid!=null||e.path!=null)return yield se(e);if(Fm(e)){const n=e[Symbol.iterator](),r=n.next();if(r.done===!0)return n;if(gs(r.value)){yield se({cid:r.value});for(const a of n)yield se({cid:a});return}if(typeof r.value=="string"){yield se({path:r.value});for(const a of n)yield se({path:a});return}if(r.value.cid!=null||r.value.path!=null){yield se(r.value);for(const a of n)yield se(a);return}throw new Ze(`Unexpected input: ${typeof e}`,"ERR_UNEXPECTED_INPUT")}if(Vm(e)){const n=e[Symbol.asyncIterator](),r=await n.next();if(r.done===!0)return n;if(gs(r.value)){yield se({cid:r.value});for await(const a of n)yield se({cid:a});return}if(typeof r.value=="string"){yield se({path:r.value});for await(const a of n)yield se({path:a});return}if(r.value.cid!=null||r.value.path!=null){yield se(r.value);for await(const a of n)yield se(a);return}throw new Ze(`Unexpected input: ${typeof e}`,"ERR_UNEXPECTED_INPUT")}throw new Ze(`Unexpected input: ${typeof e}`,"ERR_UNEXPECTED_INPUT")}function se(e){const t=e.cid??`${e.path}`;if(t==null)throw new Ze("Unexpected input: Please path either a CID or an IPFS path","ERR_UNEXPECTED_INPUT");const n={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(n.metadata=e.metadata),n}function ao(e){return async function*(n,r={}){for await(const{path:a,recursive:s,metadata:i}of ro(n)){const o=await e.post("pin/add",{signal:r.signal,searchParams:y({...r,arg:a,recursive:s,metadata:i!=null?JSON.stringify(i):void 0,stream:!0}),headers:r.headers});for await(const c of o.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield E.parse(u);continue}yield E.parse(c)}}}}function Zm(e){const t=ao(e);return async function(r,a={}){const s=await gr(t([{path:r.toString(),...a}],a));if(s==null)throw new Error("No response received");return s}}function ws(e,t,n){const r={type:e,cid:E.parse(t)};return n!=null&&(r.metadata=n),r}function Gm(e){return async function*(n={}){let r=[];n.paths!=null&&(r=Array.isArray(n.paths)?n.paths:[n.paths]);const a=await e.post("pin/ls",{signal:n.signal,searchParams:y({...n,arg:r.map(s=>`${s}`),stream:!0}),headers:n.headers});for await(const s of a.ndjson()){if(s.Keys!=null){for(const i of Object.keys(s.Keys))yield ws(s.Keys[i].Type,i,s.Keys[i].Metadata);return}yield ws(s.Type,s.Cid,s.Metadata)}}}const so=({Name:e,Status:t,Cid:n})=>({cid:E.parse(n),name:e,status:t}),io=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},oo=e=>{if(E.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Pa=({service:e,cid:t,name:n,status:r,all:a})=>{const s=y({service:io(e),name:n,force:a===!0?!0:void 0});if(t!=null)for(const i of t)s.append("cid",oo(i));if(r!=null)for(const i of r)s.append("status",i);return s},qm=(e,{service:t,background:n,name:r,origins:a})=>{const s=y({arg:oo(e),service:io(t),name:r,background:n===!0?!0:void 0});if(a!=null)for(const i of a)s.append("origin",i.toString());return s};function Hm(e){return async function(n,{timeout:r,signal:a,headers:s,...i}){const o=await e.post("pin/remote/add",{timeout:r,signal:a,headers:s,searchParams:qm(n,i)});return so(await o.json())}}function Wm(e){return async function*({timeout:n,signal:r,headers:a,...s}){const i=await e.post("pin/remote/ls",{timeout:n,signal:r,headers:a,searchParams:Pa(s)});for await(const o of i.ndjson())yield so(o)}}function Km(e){return async function({timeout:n,signal:r,headers:a,...s}){await e.post("pin/remote/rm",{timeout:n,signal:r,headers:a,searchParams:Pa({...s,all:!0})})}}function Jm(e){return async function({timeout:n,signal:r,headers:a,...s}){await e.post("pin/remote/rm",{timeout:n,signal:r,headers:a,searchParams:Pa({...s,all:!1})})}}function Qm(e){const t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function Xm(e){const t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(t.stat=Ym(e.Stat)),t}function Ym(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:n,Queued:r,Failed:a}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:n,failed:a}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function eg(e){return async function(n,r){const{endpoint:a,key:s,headers:i,timeout:o,signal:c}=r;await e.post("pin/remote/service/add",{timeout:o,signal:c,searchParams:y({arg:[n,Qm(a),s]}),headers:i})}}function tg(e){return async function(n={}){const{stat:r,headers:a,timeout:s,signal:i}=n;return(await(await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:a,searchParams:r===!0?y({stat:r}):void 0})).json()).RemoteServices.map(Xm)}}function ng(e){return async function(n,r={}){await e.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:y({arg:n})})}}function rg(e){return{add:eg(e),ls:tg(e),rm:ng(e)}}function ag(e){return{add:Hm(e),ls:Wm(e),rm:Jm(e),rmAll:Km(e),service:rg(e)}}function co(e){return async function*(n,r={}){for await(const{path:a,recursive:s}of ro(n)){const i=new URLSearchParams(r.searchParams);i.append("arg",`${a}`),s!=null&&i.set("recursive",String(s));const o=await e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:y({...r,arg:`${a}`,recursive:s})});for await(const c of o.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>E.parse(u));continue}yield E.parse(c)}}}}function sg(e){const t=co(e);return async function(r,a={}){const s=await gr(t([{path:r.toString(),...a}],a));if(s==null)throw new Error("No response received");return s}}function ig(e){return{addAll:ao(e),add:Zm(e),ls:Gm(e),rmAll:co(e),rm:sg(e),remote:ag(e)}}function og(e){return async function*(n,r={}){yield*(await e.post("ping",{signal:r.signal,searchParams:y({arg:`${n}`,...r}),headers:r.headers,transform:te})).ndjson()}}const cg=e=>Array.isArray(e)?e.map(Gr):e,Gr=e=>fe(Zt(e)),Zt=e=>Ct.decode(e),ug=e=>BigInt(`0x${fe(Ct.decode(e),"base16")}`),Aa=e=>Ct.encode(xn(e));function dg(e){return async function(n={}){const{Strings:r}=await(await e.post("pubsub/ls",{signal:n.signal,searchParams:y(n),headers:n.headers})).json();return cg(r)??[]}}function lg(e){return async function(n,r={}){const a=await e.post("pubsub/peers",{signal:r.signal,searchParams:y({arg:Aa(n),...r}),headers:r.headers}),{Strings:s}=await a.json();return s??[]}}function fg(e){return async function(n,r,a={}){const s=y({arg:Aa(n),...a}),i=new AbortController,o=Ue([i.signal,a.signal]);try{await(await e.post("pubsub/pub",{signal:o,searchParams:s,...await Ye([r],i,a.headers)})).text()}finally{o.clear()}}}const hg=Sa("js-kubo-rpc-client:pubsub:subscribe");function pg(e,t){return async function(r,a,s={}){s.signal=t.subscribe(r,a,s.signal);let i,o;const c=new Promise((l,f)=>{i=l,o=f}),u=setTimeout(()=>{i()},1e3);return e.post("pubsub/sub",{signal:s.signal,searchParams:y({arg:Aa(r),...s}),headers:s.headers}).catch(l=>{t.unsubscribe(r,a),o(l)}).then(l=>{clearTimeout(u),l!=null&&(yg(l,{onMessage:f=>{if(a!=null){if(typeof a=="function"){a(f);return}typeof a.handleEvent=="function"&&a.handleEvent(f)}},onEnd:()=>{t.unsubscribe(r,a)},onError:s.onError}),i())}),c}}async function yg(e,{onMessage:t,onEnd:n,onError:r}){r=r??hg;try{for await(const a of e.ndjson())try{if(a.from==null)continue;a.from!=null&&a.seqno!=null?t({type:"signed",from:ce(a.from),data:Zt(a.data),sequenceNumber:ug(a.seqno),topic:Gr(a.topicIDs[0]),key:Zt(a.key??"u"),signature:Zt(a.signature??"u")}):t({type:"unsigned",data:Zt(a.data),topic:Gr(a.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,r(s,!1,a)}}catch(a){mg(a)||r(a,!0)}finally{n()}}const mg=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class gg{constructor(){h(this,"_subs");this._subs=new Map}subscribe(t,n,r){const a=this._subs.get(t)??[];if(a.find(i=>i.handler===n)!=null)throw new Error(`Already subscribed to ${t} with this handler`);const s=new AbortController;return this._subs.set(t,[{handler:n,controller:s}].concat(a)),r!=null&&r.addEventListener("abort",()=>{this.unsubscribe(t,n)}),s.signal}unsubscribe(t,n){const r=this._subs.get(t)??[];let a;n!=null?(this._subs.set(t,r.filter(s=>s.handler!==n)),a=r.filter(s=>s.handler===n)):(this._subs.set(t,[]),a=r),(this._subs.get(t)??[]).length===0&&this._subs.delete(t),a.forEach(s=>{s.controller.abort()})}}function wg(e,t){return async function(r,a){t.unsubscribe(r,a)}}function bg(e){const t=new gg;return{ls:dg(e),peers:lg(e),publish:fg(e),subscribe:pg(e,t),unsubscribe:wg(e,t)}}function vg(e){return async function*(n={}){yield*(await e.post("refs/local",{signal:n.signal,transform:te,searchParams:y(n),headers:n.headers})).ndjson()}}function _g(e){async function*t(n,r={}){const a=Array.isArray(n)?n:[n];yield*(await e.post("refs",{signal:r.signal,searchParams:y({arg:a.map(i=>`${i instanceof Uint8Array?E.decode(i):i}`),...r}),headers:r.headers,transform:te})).ndjson()}return Object.assign(t,{local:vg(e)})}function xg(e){return async function*(n={}){yield*(await e.post("repo/gc",{signal:n.signal,searchParams:y(n),headers:n.headers,transform:a=>{var s;return{err:a.Error!=null?new Error(a.Error):null,cid:((s=a.Key)==null?void 0:s["/"])!=null?E.parse(a.Key["/"]):null}}})).ndjson()}}function uo(e){return async function(n={}){const a=await(await e.post("repo/stat",{signal:n.signal,searchParams:y(n),headers:n.headers})).json();return{numObjects:BigInt(a.NumObjects),repoSize:BigInt(a.RepoSize),repoPath:a.RepoPath,version:a.Version,storageMax:BigInt(a.StorageMax)}}}function Eg(e){return async function(n={}){return(await(await e.post("repo/version",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()).Version}}function Tg(e){return{gc:xg(e),stat:uo(e),version:Eg(e)}}function Sg(e){return async function(n,r={}){const a=await e.post("resolve",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers}),{Path:s}=await a.json();return s}}function kg(e){return async function*(n,r={}){const a=await e.post("routing/findpeer",{signal:r.signal,searchParams:y({arg:n.toString(),stream:!0,...r}),headers:r.headers});for await(const s of a.ndjson())yield Dt(s)}}function Pg(e){return async function*(n,r={}){const a=await e.post("routing/findprovs",{signal:r.signal,searchParams:y({arg:n.toString(),...r}),headers:r.headers});for await(const s of a.ndjson())yield Dt(s)}}function Ag(e){return async function*(n,r={}){const a=await e.post("routing/get",{signal:r.signal,searchParams:y({arg:n instanceof Uint8Array?fe(n):n.toString(),...r}),headers:r.headers});for await(const s of a.ndjson())yield Dt(s)}}function Ig(e){return async function*(n,r={recursive:!1}){const a=Array.isArray(n)?n:[n],s=await e.post("routing/provide",{signal:r.signal,searchParams:y({arg:a.map(i=>i.toString()),...r}),headers:r.headers});for await(const i of s.ndjson())yield Dt(i)}}function $g(e){return async function*(n,r,a={}){const s=new AbortController,i=Ue([s.signal,a.signal]);try{const o=await e.post("routing/put",{signal:i,searchParams:y({arg:n instanceof Uint8Array?fe(n):n.toString(),stream:!0,...a}),...await Ye([r],s,a.headers)});for await(const c of o.ndjson())yield Dt(c)}finally{i.clear()}}}function Cg(e){return{findPeer:kg(e),findProvs:Pg(e),get:Ag(e),provide:Ig(e),put:$g(e)}}function Ng(e){return async function*(n={}){yield*(await e.post("stats/bw",{signal:n.signal,searchParams:y(n),headers:n.headers,transform:a=>({totalIn:BigInt(a.TotalIn),totalOut:BigInt(a.TotalOut),rateIn:parseFloat(a.RateIn),rateOut:parseFloat(a.RateOut)})})).ndjson()}}function Og(e){return{bitswap:Gi(e),repo:uo(e),bw:Ng(e)}}function Rg(e){return async function(n={}){await(await e.post("shutdown",{signal:n.signal,searchParams:y(n),headers:n.headers})).text()}}function Bg(e){return async function(n={}){const r=await e.post("swarm/addrs",{signal:n.signal,searchParams:y(n),headers:n.headers}),{Addrs:a}=await r.json();return Object.keys(a).map(s=>({id:ce(s),addrs:(a[s]??[]).map(i=>le(i))}))}}function Dg(e){return async function(n,r={}){const a=await e.post("swarm/connect",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers}),{Strings:s}=await a.json();return s??[]}}function jg(e){return async function(n,r={}){const a=await e.post("swarm/disconnect",{signal:r.signal,searchParams:y({arg:n,...r}),headers:r.headers}),{Strings:s}=await a.json();return s??[]}}function Ug(e){return async function(n={}){const r=await e.post("swarm/addrs/local",{signal:n.signal,searchParams:y(n),headers:n.headers}),{Strings:a}=await r.json();return(a??[]).map(s=>le(s))}}function Mg(e){return async function(n={}){return((await(await e.post("swarm/peers",{signal:n.signal,searchParams:y(n),headers:n.headers})).json()).Peers??[]).map(s=>({addr:le(s.Addr),peer:ce(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}}function Lg(e){return{addrs:Bg(e),connect:Dg(e),disconnect:jg(e),localAddrs:Ug(e),peers:Mg(e)}}function zg(e){return async function(n={}){const r=await e.post("version",{signal:n.signal,searchParams:y(n),headers:n.headers});return{...te(await r.json()),"ipfs-http-client":"1.0.0"}}}class Fg{constructor(t){h(this,"bases");h(this,"codecs");h(this,"hashers");h(this,"bitswap");h(this,"block");h(this,"bootstrap");h(this,"config");h(this,"dag");h(this,"dht");h(this,"diag");h(this,"files");h(this,"key");h(this,"log");h(this,"name");h(this,"object");h(this,"pin");h(this,"pubsub");h(this,"refs");h(this,"repo");h(this,"routing");h(this,"stats");h(this,"swarm");h(this,"add");h(this,"addAll");h(this,"cat");h(this,"get");h(this,"ls");h(this,"id");h(this,"version");h(this,"stop");h(this,"ping");h(this,"resolve");h(this,"commands");h(this,"mount");h(this,"isOnline");h(this,"getEndpointConfig");var o,c,u,l,f,_;const n=new gm(t),r={name:Qt.name,code:Qt.code,encode:g=>g,decode:g=>g},a=Object.values(xt);(((o=t.ipld)==null?void 0:o.bases)??[]).forEach(g=>a.push(g)),this.bases=new bm({bases:a,loadBase:(c=t.ipld)==null?void 0:c.loadBase});const s=Object.values(Cd);[wh,Rf,Xf,jh,r].concat(((u=t.ipld)==null?void 0:u.codecs)??[]).forEach(g=>{s.push(g)}),this.codecs=new _m({codecs:s,loadCodec:(l=t.ipld)==null?void 0:l.loadCodec});const i=Object.values($d);(((f=t.ipld)==null?void 0:f.hashers)??[]).forEach(g=>i.push(g)),this.hashers=new Em({hashers:i,loadHasher:(_=t.ipld)==null?void 0:_.loadHasher}),this.bitswap=pp(n),this.block=bp(n),this.bootstrap=Ep(n),this.config=Op(n),this.dag=zp(n,this.codecs),this.dht=Qp(n),this.diag=ty(n),this.files=yy(n),this.key=Sy(n),this.log=Pm(n),this.name=jm(n),this.object=zm(n,this.codecs),this.pin=ig(n),this.pubsub=bg(n),this.refs=_g(n),this.repo=Tg(n),this.routing=Cg(n),this.stats=Og(n),this.swarm=Lg(n),this.add=ip(n),this.addAll=zi(n),this.cat=Tp(n),this.get=gy(n),this.ls=Am(n),this.id=Wi(n),this.version=zg(n),this.stop=Rg(n),this.ping=og(n),this.resolve=Sg(n),this.commands=Sp(n),this.mount=$m(n),this.isOnline=wy(n),this.getEndpointConfig=my(n)}}function Vg(e){return new Fg(e)}function Zg(e={}){return(typeof e=="string"||Mn(e)||e instanceof URL)&&(e={url:e}),Vg(e)}var V;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const s={};for(const i of a)s[i]=i;return s},e.getValidEnumValues=a=>{const s=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),i={};for(const o of s)i[o]=a[o];return e.objectValues(i)},e.objectValues=a=>e.objectKeys(a).map(function(s){return a[s]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&s.push(i);return s},e.find=(a,s)=>{for(const i of a)if(s(i))return i},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,s=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(V||(V={}));var qr;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(qr||(qr={}));const x=V.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fe=e=>{switch(typeof e){case"undefined":return x.undefined;case"string":return x.string;case"number":return isNaN(e)?x.nan:x.number;case"boolean":return x.boolean;case"function":return x.function;case"bigint":return x.bigint;case"symbol":return x.symbol;case"object":return Array.isArray(e)?x.array:e===null?x.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?x.promise:typeof Map<"u"&&e instanceof Map?x.map:typeof Set<"u"&&e instanceof Set?x.set:typeof Date<"u"&&e instanceof Date?x.date:x.object;default:return x.unknown}},p=V.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Gg=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class me extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(s){return s.message},r={_errors:[]},a=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let o=r,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(i))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return a(this),r}static assert(t){if(!(t instanceof me))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,V.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}me.create=e=>new me(e);const kt=(e,t)=>{let n;switch(e.code){case p.invalid_type:e.received===x.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,V.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${V.joinValues(e.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${V.joinValues(e.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${V.joinValues(e.options)}, received '${e.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:V.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case p.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case p.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=t.defaultError,V.assertNever(e)}return{message:n}};let lo=kt;function qg(e){lo=e}function Kn(){return lo}const Jn=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,s=[...n,...a.path||[]],i={...a,path:s};if(a.message!==void 0)return{...a,path:s,message:a.message};let o="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)o=u(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}},Hg=[];function v(e,t){const n=Kn(),r=Jn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===kt?void 0:kt].filter(a=>!!a)});e.common.issues.push(r)}class ae{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return A;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const s=await a.key,i=await a.value;r.push({key:s,value:i})}return ae.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:s,value:i}=a;if(s.status==="aborted"||i.status==="aborted")return A;s.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||a.alwaysSet)&&(r[s.value]=i.value)}return{status:t.value,value:r}}}const A=Object.freeze({status:"aborted"}),yt=e=>({status:"dirty",value:e}),ie=e=>({status:"valid",value:e}),Hr=e=>e.status==="aborted",Wr=e=>e.status==="dirty",tn=e=>e.status==="valid",nn=e=>typeof Promise<"u"&&e instanceof Promise;function Qn(e,t,n,r){if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function fo(e,t,n,r,a){if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var T;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(T||(T={}));var Gt,qt;class Ie{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bs=(e,t)=>{if(tn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new me(e.common.issues);return this._error=n,this._error}}};function O(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(i,o)=>{var c,u;const{message:l}=e;return i.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:(c=l??r)!==null&&c!==void 0?c:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(u=l??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class j{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Fe(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Fe(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ae,ctx:{common:t.parent.common,data:t.data,parsedType:Fe(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(nn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fe(t)},s=this._parseSync({data:t,path:a.path,parent:a});return bs(a,s)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fe(t)},a=this._parse({data:t,path:r.path,parent:r}),s=await(nn(a)?a:Promise.resolve(a));return bs(r,s)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,s)=>{const i=t(a),o=()=>s.addIssue({code:p.custom,...r(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Se({schema:this,typeName:P.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Ae.create(this,this._def)}nullable(){return Qe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Te.create(this,this._def)}promise(){return At.create(this,this._def)}or(t){return on.create([this,t],this._def)}and(t){return cn.create(this,t,this._def)}transform(t){return new Se({...O(this._def),schema:this,typeName:P.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new hn({...O(this._def),innerType:this,defaultValue:n,typeName:P.ZodDefault})}brand(){return new Ia({typeName:P.ZodBranded,type:this,...O(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new pn({...O(this._def),innerType:this,catchValue:n,typeName:P.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Sn.create(this,t)}readonly(){return yn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Wg=/^c[^\s-]{8,}$/i,Kg=/^[0-9a-z]+$/,Jg=/^[0-9A-HJKMNP-TV-Z]{26}$/,Qg=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Xg=/^[a-z0-9_-]{21}$/i,Yg=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ew=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,tw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let kr;const nw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rw=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,aw=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ho="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sw=new RegExp(`^${ho}$`);function po(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function iw(e){return new RegExp(`^${po(e)}$`)}function yo(e){let t=`${ho}T${po(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function ow(e,t){return!!((t==="v4"||!t)&&nw.test(e)||(t==="v6"||!t)&&rw.test(e))}class Ee extends j{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==x.string){const s=this._getOrReturnCtx(t);return v(s,{code:p.invalid_type,expected:x.string,received:s.parsedType}),A}const r=new ae;let a;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const i=t.data.length>s.value,o=t.data.length<s.value;(i||o)&&(a=this._getOrReturnCtx(t,a),i?v(a,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&v(a,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")ew.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"email",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")kr||(kr=new RegExp(tw,"u")),kr.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"emoji",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Qg.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"uuid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")Xg.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"nanoid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Wg.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"cuid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Kg.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"cuid2",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Jg.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"ulid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),v(a,{validation:"url",code:p.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"regex",code:p.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(t,a),v(a,{code:p.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(a=this._getOrReturnCtx(t,a),v(a,{code:p.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(a=this._getOrReturnCtx(t,a),v(a,{code:p.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?yo(s).test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{code:p.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?sw.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{code:p.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?iw(s).test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{code:p.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?Yg.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"duration",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?ow(t.data,s.version)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"ip",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?aw.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"base64",code:p.invalid_string,message:s.message}),r.dirty()):V.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:p.invalid_string,...T.errToObj(r)})}_addCheck(t){return new Ee({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...T.errToObj(t)})}url(t){return this._addCheck({kind:"url",...T.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...T.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...T.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...T.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...T.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...T.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...T.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...T.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...T.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...T.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...T.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...T.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...T.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...T.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...T.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...T.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...T.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...T.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...T.errToObj(n)})}nonempty(t){return this.min(1,T.errToObj(t))}trim(){return new Ee({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ee({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ee({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ee.create=e=>{var t;return new Ee({checks:[],typeName:P.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...O(e)})};function cw(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,s=parseInt(e.toFixed(a).replace(".","")),i=parseInt(t.toFixed(a).replace(".",""));return s%i/Math.pow(10,a)}class We extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==x.number){const s=this._getOrReturnCtx(t);return v(s,{code:p.invalid_type,expected:x.number,received:s.parsedType}),A}let r;const a=new ae;for(const s of this._def.checks)s.kind==="int"?V.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),v(r,{code:p.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),v(r,{code:p.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),v(r,{code:p.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?cw(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),v(r,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),v(r,{code:p.not_finite,message:s.message}),a.dirty()):V.assertNever(s);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,T.toString(n))}gt(t,n){return this.setLimit("min",t,!1,T.toString(n))}lte(t,n){return this.setLimit("max",t,!0,T.toString(n))}lt(t,n){return this.setLimit("max",t,!1,T.toString(n))}setLimit(t,n,r,a){return new We({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:T.toString(a)}]})}_addCheck(t){return new We({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:T.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:T.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:T.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&V.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}We.create=e=>new We({checks:[],typeName:P.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...O(e)});class Ke extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==x.bigint){const s=this._getOrReturnCtx(t);return v(s,{code:p.invalid_type,expected:x.bigint,received:s.parsedType}),A}let r;const a=new ae;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),v(r,{code:p.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),v(r,{code:p.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),v(r,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):V.assertNever(s);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,T.toString(n))}gt(t,n){return this.setLimit("min",t,!1,T.toString(n))}lte(t,n){return this.setLimit("max",t,!0,T.toString(n))}lt(t,n){return this.setLimit("max",t,!1,T.toString(n))}setLimit(t,n,r,a){return new Ke({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:T.toString(a)}]})}_addCheck(t){return new Ke({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:T.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ke.create=e=>{var t;return new Ke({checks:[],typeName:P.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...O(e)})};class rn extends j{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==x.boolean){const r=this._getOrReturnCtx(t);return v(r,{code:p.invalid_type,expected:x.boolean,received:r.parsedType}),A}return ie(t.data)}}rn.create=e=>new rn({typeName:P.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...O(e)});class at extends j{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==x.date){const s=this._getOrReturnCtx(t);return v(s,{code:p.invalid_type,expected:x.date,received:s.parsedType}),A}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return v(s,{code:p.invalid_date}),A}const r=new ae;let a;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:p.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:p.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):V.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new at({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:T.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:T.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}at.create=e=>new at({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:P.ZodDate,...O(e)});class Xn extends j{_parse(t){if(this._getType(t)!==x.symbol){const r=this._getOrReturnCtx(t);return v(r,{code:p.invalid_type,expected:x.symbol,received:r.parsedType}),A}return ie(t.data)}}Xn.create=e=>new Xn({typeName:P.ZodSymbol,...O(e)});class an extends j{_parse(t){if(this._getType(t)!==x.undefined){const r=this._getOrReturnCtx(t);return v(r,{code:p.invalid_type,expected:x.undefined,received:r.parsedType}),A}return ie(t.data)}}an.create=e=>new an({typeName:P.ZodUndefined,...O(e)});class sn extends j{_parse(t){if(this._getType(t)!==x.null){const r=this._getOrReturnCtx(t);return v(r,{code:p.invalid_type,expected:x.null,received:r.parsedType}),A}return ie(t.data)}}sn.create=e=>new sn({typeName:P.ZodNull,...O(e)});class Pt extends j{constructor(){super(...arguments),this._any=!0}_parse(t){return ie(t.data)}}Pt.create=e=>new Pt({typeName:P.ZodAny,...O(e)});class nt extends j{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ie(t.data)}}nt.create=e=>new nt({typeName:P.ZodUnknown,...O(e)});class je extends j{_parse(t){const n=this._getOrReturnCtx(t);return v(n,{code:p.invalid_type,expected:x.never,received:n.parsedType}),A}}je.create=e=>new je({typeName:P.ZodNever,...O(e)});class Yn extends j{_parse(t){if(this._getType(t)!==x.undefined){const r=this._getOrReturnCtx(t);return v(r,{code:p.invalid_type,expected:x.void,received:r.parsedType}),A}return ie(t.data)}}Yn.create=e=>new Yn({typeName:P.ZodVoid,...O(e)});class Te extends j{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==x.array)return v(n,{code:p.invalid_type,expected:x.array,received:n.parsedType}),A;if(a.exactLength!==null){const i=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(i||o)&&(v(n,{code:i?p.too_big:p.too_small,minimum:o?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(v(n,{code:p.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(v(n,{code:p.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,o)=>a.type._parseAsync(new Ie(n,i,n.path,o)))).then(i=>ae.mergeArray(r,i));const s=[...n.data].map((i,o)=>a.type._parseSync(new Ie(n,i,n.path,o)));return ae.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new Te({...this._def,minLength:{value:t,message:T.toString(n)}})}max(t,n){return new Te({...this._def,maxLength:{value:t,message:T.toString(n)}})}length(t,n){return new Te({...this._def,exactLength:{value:t,message:T.toString(n)}})}nonempty(t){return this.min(1,t)}}Te.create=(e,t)=>new Te({type:e,minLength:null,maxLength:null,exactLength:null,typeName:P.ZodArray,...O(t)});function pt(e){if(e instanceof X){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ae.create(pt(r))}return new X({...e._def,shape:()=>t})}else return e instanceof Te?new Te({...e._def,type:pt(e.element)}):e instanceof Ae?Ae.create(pt(e.unwrap())):e instanceof Qe?Qe.create(pt(e.unwrap())):e instanceof $e?$e.create(e.items.map(t=>pt(t))):e}class X extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=V.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==x.object){const u=this._getOrReturnCtx(t);return v(u,{code:p.invalid_type,expected:x.object,received:u.parsedType}),A}const{status:r,ctx:a}=this._processInputParams(t),{shape:s,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof je&&this._def.unknownKeys==="strip"))for(const u in a.data)i.includes(u)||o.push(u);const c=[];for(const u of i){const l=s[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ie(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof je){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of o)c.push({key:{status:"valid",value:l},value:{status:"valid",value:a.data[l]}});else if(u==="strict")o.length>0&&(v(a,{code:p.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of o){const f=a.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ie(a,f,a.path,l)),alwaysSet:l in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const f=await l.key,_=await l.value;u.push({key:f,value:_,alwaysSet:l.alwaysSet})}return u}).then(u=>ae.mergeObjectSync(r,u)):ae.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return T.errToObj,new X({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,s,i,o;const c=(i=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,n,r).message)!==null&&i!==void 0?i:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=T.errToObj(t).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(t){return new X({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new X({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:P.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new X({...this._def,catchall:t})}pick(t){const n={};return V.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new X({...this._def,shape:()=>n})}omit(t){const n={};return V.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new X({...this._def,shape:()=>n})}deepPartial(){return pt(this)}partial(t){const n={};return V.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new X({...this._def,shape:()=>n})}required(t){const n={};return V.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Ae;)s=s._def.innerType;n[r]=s}}),new X({...this._def,shape:()=>n})}keyof(){return mo(V.objectKeys(this.shape))}}X.create=(e,t)=>new X({shape:()=>e,unknownKeys:"strip",catchall:je.create(),typeName:P.ZodObject,...O(t)});X.strictCreate=(e,t)=>new X({shape:()=>e,unknownKeys:"strict",catchall:je.create(),typeName:P.ZodObject,...O(t)});X.lazycreate=(e,t)=>new X({shape:e,unknownKeys:"strip",catchall:je.create(),typeName:P.ZodObject,...O(t)});class on extends j{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const i=s.map(o=>new me(o.ctx.common.issues));return v(n,{code:p.invalid_union,unionErrors:i}),A}if(n.common.async)return Promise.all(r.map(async s=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(a);{let s;const i=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!s&&(s={result:l,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(c=>new me(c));return v(n,{code:p.invalid_union,unionErrors:o}),A}}get options(){return this._def.options}}on.create=(e,t)=>new on({options:e,typeName:P.ZodUnion,...O(t)});const Be=e=>e instanceof dn?Be(e.schema):e instanceof Se?Be(e.innerType()):e instanceof ln?[e.value]:e instanceof Je?e.options:e instanceof fn?V.objectValues(e.enum):e instanceof hn?Be(e._def.innerType):e instanceof an?[void 0]:e instanceof sn?[null]:e instanceof Ae?[void 0,...Be(e.unwrap())]:e instanceof Qe?[null,...Be(e.unwrap())]:e instanceof Ia||e instanceof yn?Be(e.unwrap()):e instanceof pn?Be(e._def.innerType):[];class br extends j{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==x.object)return v(n,{code:p.invalid_type,expected:x.object,received:n.parsedType}),A;const r=this.discriminator,a=n.data[r],s=this.optionsMap.get(a);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(v(n,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),A)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const s of n){const i=Be(s.shape[t]);if(!i.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of i){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,s)}}return new br({typeName:P.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...O(r)})}}function Kr(e,t){const n=Fe(e),r=Fe(t);if(e===t)return{valid:!0,data:e};if(n===x.object&&r===x.object){const a=V.objectKeys(t),s=V.objectKeys(e).filter(o=>a.indexOf(o)!==-1),i={...e,...t};for(const o of s){const c=Kr(e[o],t[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(n===x.array&&r===x.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let s=0;s<e.length;s++){const i=e[s],o=t[s],c=Kr(i,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return n===x.date&&r===x.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class cn extends j{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(s,i)=>{if(Hr(s)||Hr(i))return A;const o=Kr(s.value,i.value);return o.valid?((Wr(s)||Wr(i))&&n.dirty(),{status:n.value,value:o.data}):(v(r,{code:p.invalid_intersection_types}),A)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,i])=>a(s,i)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}cn.create=(e,t,n)=>new cn({left:e,right:t,typeName:P.ZodIntersection,...O(n)});class $e extends j{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==x.array)return v(r,{code:p.invalid_type,expected:x.array,received:r.parsedType}),A;if(r.data.length<this._def.items.length)return v(r,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A;!this._def.rest&&r.data.length>this._def.items.length&&(v(r,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Ie(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(s).then(i=>ae.mergeArray(n,i)):ae.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new $e({...this._def,rest:t})}}$e.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $e({items:e,typeName:P.ZodTuple,rest:null,...O(t)})};class un extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==x.object)return v(r,{code:p.invalid_type,expected:x.object,received:r.parsedType}),A;const a=[],s=this._def.keyType,i=this._def.valueType;for(const o in r.data)a.push({key:s._parse(new Ie(r,o,r.path,o)),value:i._parse(new Ie(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?ae.mergeObjectAsync(n,a):ae.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof j?new un({keyType:t,valueType:n,typeName:P.ZodRecord,...O(r)}):new un({keyType:Ee.create(),valueType:t,typeName:P.ZodRecord,...O(n)})}}class er extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==x.map)return v(r,{code:p.invalid_type,expected:x.map,received:r.parsedType}),A;const a=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map(([o,c],u)=>({key:a._parse(new Ie(r,o,r.path,[u,"key"])),value:s._parse(new Ie(r,c,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return A;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),o.set(u.value,l.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of i){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return A;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),o.set(u.value,l.value)}return{status:n.value,value:o}}}}er.create=(e,t,n)=>new er({valueType:t,keyType:e,typeName:P.ZodMap,...O(n)});class st extends j{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==x.set)return v(r,{code:p.invalid_type,expected:x.set,received:r.parsedType}),A;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(v(r,{code:p.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(v(r,{code:p.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const s=this._def.valueType;function i(c){const u=new Set;for(const l of c){if(l.status==="aborted")return A;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((c,u)=>s._parse(new Ie(r,c,r.path,u)));return r.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(t,n){return new st({...this._def,minSize:{value:t,message:T.toString(n)}})}max(t,n){return new st({...this._def,maxSize:{value:t,message:T.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}st.create=(e,t)=>new st({valueType:e,minSize:null,maxSize:null,typeName:P.ZodSet,...O(t)});class vt extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==x.function)return v(n,{code:p.invalid_type,expected:x.function,received:n.parsedType}),A;function r(o,c){return Jn({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Kn(),kt].filter(u=>!!u),issueData:{code:p.invalid_arguments,argumentsError:c}})}function a(o,c){return Jn({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Kn(),kt].filter(u=>!!u),issueData:{code:p.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},i=n.data;if(this._def.returns instanceof At){const o=this;return ie(async function(...c){const u=new me([]),l=await o._def.args.parseAsync(c,s).catch(g=>{throw u.addIssue(r(c,g)),u}),f=await Reflect.apply(i,this,l);return await o._def.returns._def.type.parseAsync(f,s).catch(g=>{throw u.addIssue(a(f,g)),u})})}else{const o=this;return ie(function(...c){const u=o._def.args.safeParse(c,s);if(!u.success)throw new me([r(c,u.error)]);const l=Reflect.apply(i,this,u.data),f=o._def.returns.safeParse(l,s);if(!f.success)throw new me([a(l,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new vt({...this._def,args:$e.create(t).rest(nt.create())})}returns(t){return new vt({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new vt({args:t||$e.create([]).rest(nt.create()),returns:n||nt.create(),typeName:P.ZodFunction,...O(r)})}}class dn extends j{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}dn.create=(e,t)=>new dn({getter:e,typeName:P.ZodLazy,...O(t)});class ln extends j{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return v(n,{received:n.data,code:p.invalid_literal,expected:this._def.value}),A}return{status:"valid",value:t.data}}get value(){return this._def.value}}ln.create=(e,t)=>new ln({value:e,typeName:P.ZodLiteral,...O(t)});function mo(e,t){return new Je({values:e,typeName:P.ZodEnum,...O(t)})}class Je extends j{constructor(){super(...arguments),Gt.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return v(n,{expected:V.joinValues(r),received:n.parsedType,code:p.invalid_type}),A}if(Qn(this,Gt)||fo(this,Gt,new Set(this._def.values)),!Qn(this,Gt).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return v(n,{received:n.data,code:p.invalid_enum_value,options:r}),A}return ie(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Je.create(t,{...this._def,...n})}exclude(t,n=this._def){return Je.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Gt=new WeakMap;Je.create=mo;class fn extends j{constructor(){super(...arguments),qt.set(this,void 0)}_parse(t){const n=V.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==x.string&&r.parsedType!==x.number){const a=V.objectValues(n);return v(r,{expected:V.joinValues(a),received:r.parsedType,code:p.invalid_type}),A}if(Qn(this,qt)||fo(this,qt,new Set(V.getValidEnumValues(this._def.values))),!Qn(this,qt).has(t.data)){const a=V.objectValues(n);return v(r,{received:r.data,code:p.invalid_enum_value,options:a}),A}return ie(t.data)}get enum(){return this._def.values}}qt=new WeakMap;fn.create=(e,t)=>new fn({values:e,typeName:P.ZodNativeEnum,...O(t)});class At extends j{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==x.promise&&n.common.async===!1)return v(n,{code:p.invalid_type,expected:x.promise,received:n.parsedType}),A;const r=n.parsedType===x.promise?n.data:Promise.resolve(n.data);return ie(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}At.create=(e,t)=>new At({type:e,typeName:P.ZodPromise,...O(t)});class Se extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===P.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,s={addIssue:i=>{v(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){const i=a.transform(r.data,s);if(r.common.async)return Promise.resolve(i).then(async o=>{if(n.value==="aborted")return A;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?A:c.status==="dirty"||n.value==="dirty"?yt(c.value):c});{if(n.value==="aborted")return A;const o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?A:o.status==="dirty"||n.value==="dirty"?yt(o.value):o}}if(a.type==="refinement"){const i=o=>{const c=a.refinement(o,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?A:(o.status==="dirty"&&n.dirty(),i(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?A:(o.status==="dirty"&&n.dirty(),i(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!tn(i))return i;const o=a.transform(i.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>tn(i)?Promise.resolve(a.transform(i.value,s)).then(o=>({status:n.value,value:o})):i);V.assertNever(a)}}Se.create=(e,t,n)=>new Se({schema:e,typeName:P.ZodEffects,effect:t,...O(n)});Se.createWithPreprocess=(e,t,n)=>new Se({schema:t,effect:{type:"preprocess",transform:e},typeName:P.ZodEffects,...O(n)});class Ae extends j{_parse(t){return this._getType(t)===x.undefined?ie(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ae.create=(e,t)=>new Ae({innerType:e,typeName:P.ZodOptional,...O(t)});class Qe extends j{_parse(t){return this._getType(t)===x.null?ie(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Qe.create=(e,t)=>new Qe({innerType:e,typeName:P.ZodNullable,...O(t)});class hn extends j{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===x.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hn.create=(e,t)=>new hn({innerType:e,typeName:P.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...O(t)});class pn extends j{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return nn(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new me(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new me(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pn.create=(e,t)=>new pn({innerType:e,typeName:P.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...O(t)});class tr extends j{_parse(t){if(this._getType(t)!==x.nan){const r=this._getOrReturnCtx(t);return v(r,{code:p.invalid_type,expected:x.nan,received:r.parsedType}),A}return{status:"valid",value:t.data}}}tr.create=e=>new tr({typeName:P.ZodNaN,...O(e)});const uw=Symbol("zod_brand");class Ia extends j{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Sn extends j{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?A:s.status==="dirty"?(n.dirty(),yt(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?A:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new Sn({in:t,out:n,typeName:P.ZodPipeline})}}class yn extends j{_parse(t){const n=this._def.innerType._parse(t),r=a=>(tn(a)&&(a.value=Object.freeze(a.value)),a);return nn(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}yn.create=(e,t)=>new yn({innerType:e,typeName:P.ZodReadonly,...O(t)});function go(e,t={},n){return e?Pt.create().superRefine((r,a)=>{var s,i;if(!e(r)){const o=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,c=(i=(s=o.fatal)!==null&&s!==void 0?s:n)!==null&&i!==void 0?i:!0,u=typeof o=="string"?{message:o}:o;a.addIssue({code:"custom",...u,fatal:c})}}):Pt.create()}const dw={object:X.lazycreate};var P;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(P||(P={}));const lw=(e,t={message:`Input not instance of ${e.name}`})=>go(n=>n instanceof e,t),wo=Ee.create,bo=We.create,fw=tr.create,hw=Ke.create,vo=rn.create,pw=at.create,yw=Xn.create,mw=an.create,gw=sn.create,ww=Pt.create,bw=nt.create,vw=je.create,_w=Yn.create,xw=Te.create,Ew=X.create,Tw=X.strictCreate,Sw=on.create,kw=br.create,Pw=cn.create,Aw=$e.create,Iw=un.create,$w=er.create,Cw=st.create,Nw=vt.create,Ow=dn.create,Rw=ln.create,Bw=Je.create,Dw=fn.create,jw=At.create,vs=Se.create,Uw=Ae.create,Mw=Qe.create,Lw=Se.createWithPreprocess,zw=Sn.create,Fw=()=>wo().optional(),Vw=()=>bo().optional(),Zw=()=>vo().optional(),Gw={string:e=>Ee.create({...e,coerce:!0}),number:e=>We.create({...e,coerce:!0}),boolean:e=>rn.create({...e,coerce:!0}),bigint:e=>Ke.create({...e,coerce:!0}),date:e=>at.create({...e,coerce:!0})},qw=A;var _s=Object.freeze({__proto__:null,defaultErrorMap:kt,setErrorMap:qg,getErrorMap:Kn,makeIssue:Jn,EMPTY_PATH:Hg,addIssueToContext:v,ParseStatus:ae,INVALID:A,DIRTY:yt,OK:ie,isAborted:Hr,isDirty:Wr,isValid:tn,isAsync:nn,get util(){return V},get objectUtil(){return qr},ZodParsedType:x,getParsedType:Fe,ZodType:j,datetimeRegex:yo,ZodString:Ee,ZodNumber:We,ZodBigInt:Ke,ZodBoolean:rn,ZodDate:at,ZodSymbol:Xn,ZodUndefined:an,ZodNull:sn,ZodAny:Pt,ZodUnknown:nt,ZodNever:je,ZodVoid:Yn,ZodArray:Te,ZodObject:X,ZodUnion:on,ZodDiscriminatedUnion:br,ZodIntersection:cn,ZodTuple:$e,ZodRecord:un,ZodMap:er,ZodSet:st,ZodFunction:vt,ZodLazy:dn,ZodLiteral:ln,ZodEnum:Je,ZodNativeEnum:fn,ZodPromise:At,ZodEffects:Se,ZodTransformer:Se,ZodOptional:Ae,ZodNullable:Qe,ZodDefault:hn,ZodCatch:pn,ZodNaN:tr,BRAND:uw,ZodBranded:Ia,ZodPipeline:Sn,ZodReadonly:yn,custom:go,Schema:j,ZodSchema:j,late:dw,get ZodFirstPartyTypeKind(){return P},coerce:Gw,any:ww,array:xw,bigint:hw,boolean:vo,date:pw,discriminatedUnion:kw,effect:vs,enum:Bw,function:Nw,instanceof:lw,intersection:Pw,lazy:Ow,literal:Rw,map:$w,nan:fw,nativeEnum:Dw,never:vw,null:gw,nullable:Mw,number:bo,object:Ew,oboolean:Zw,onumber:Vw,optional:Uw,ostring:Fw,pipeline:zw,preprocess:Lw,promise:jw,record:Iw,set:Cw,strictObject:Tw,string:wo,symbol:yw,transformer:vs,tuple:Aw,undefined:mw,union:Sw,unknown:bw,void:_w,NEVER:qw,ZodIssueCode:p,quotelessJson:Gg,ZodError:me});function Hw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xs(Object(n),!0).forEach(function(r){Hw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ww(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Kw(e,t){if(e==null)return{};var n=Ww(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jw(e,t){return Qw(e)||Xw(e,t)||Yw(e,t)||eb()}function Qw(e){if(Array.isArray(e))return e}function Xw(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var i=e[Symbol.iterator](),o;!(r=(o=i.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(a)throw s}}return n}}function Yw(e,t){if(e){if(typeof e=="string")return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ts(e,t)}}function Ts(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ss(Object(n),!0).forEach(function(r){tb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(a,s){return s(a)},r)}}function Ht(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return a.length>=e.length?e.apply(this,a):function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t.apply(n,[].concat(a,o))}}}function nr(e){return{}.toString.call(e).includes("Object")}function rb(e){return!Object.keys(e).length}function mn(e){return typeof e=="function"}function ab(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function sb(e,t){return nr(t)||qe("changeType"),Object.keys(t).some(function(n){return!ab(e,n)})&&qe("changeField"),t}function ib(e){mn(e)||qe("selectorType")}function ob(e){mn(e)||nr(e)||qe("handlerType"),nr(e)&&Object.values(e).some(function(t){return!mn(t)})&&qe("handlersType")}function cb(e){e||qe("initialIsRequired"),nr(e)||qe("initialType"),rb(e)&&qe("initialContent")}function ub(e,t){throw new Error(e[t]||e.default)}var db={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},qe=Ht(ub)(db),$n={changes:sb,selector:ib,handler:ob,initial:cb};function lb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$n.initial(e),$n.handler(t);var n={current:e},r=Ht(pb)(n,t),a=Ht(hb)(n),s=Ht($n.changes)(e),i=Ht(fb)(n);function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(l){return l};return $n.selector(u),u(n.current)}function c(u){nb(r,a,s,i)(u)}return[o,c]}function fb(e,t){return mn(t)?t(e.current):t}function hb(e,t){return e.current=ks(ks({},e.current),t),t}function pb(e,t,n){return mn(t)?t(e.current):Object.keys(n).forEach(function(r){var a;return(a=t[r])===null||a===void 0?void 0:a.call(t,e.current[r])}),n}var yb={create:lb},mb={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function gb(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return a.length>=e.length?e.apply(this,a):function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t.apply(n,[].concat(a,o))}}}function wb(e){return{}.toString.call(e).includes("Object")}function bb(e){return e||Ps("configIsRequired"),wb(e)||Ps("configType"),e.urls?(vb(),{paths:{vs:e.urls.monacoBase}}):e}function vb(){console.warn(_o.deprecation)}function _b(e,t){throw new Error(e[t]||e.default)}var _o={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ps=gb(_b)(_o),xb={config:bb},Eb=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(a){return n.reduceRight(function(s,i){return i(s)},a)}};function xo(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],xo(e[n],t[n]))}),Es(Es({},e),t)}var Tb={type:"cancelation",msg:"operation is manually canceled"};function Pr(e){var t=!1,n=new Promise(function(r,a){e.then(function(s){return t?a(Tb):r(s)}),e.catch(a)});return n.cancel=function(){return t=!0},n}var Sb=yb.create({config:mb,isInitialized:!1,resolve:null,reject:null,monaco:null}),Eo=Jw(Sb,2),kn=Eo[0],vr=Eo[1];function kb(e){var t=xb.config(e),n=t.monaco,r=Kw(t,["monaco"]);vr(function(a){return{config:xo(a.config,r),monaco:n}})}function Pb(){var e=kn(function(t){var n=t.monaco,r=t.isInitialized,a=t.resolve;return{monaco:n,isInitialized:r,resolve:a}});if(!e.isInitialized){if(vr({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Pr(Ar);if(window.monaco&&window.monaco.editor)return To(window.monaco),e.resolve(window.monaco),Pr(Ar);Eb(Ab,$b)(Cb)}return Pr(Ar)}function Ab(e){return document.body.appendChild(e)}function Ib(e){var t=document.createElement("script");return e&&(t.src=e),t}function $b(e){var t=kn(function(r){var a=r.config,s=r.reject;return{config:a,reject:s}}),n=Ib("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function Cb(){var e=kn(function(n){var r=n.config,a=n.resolve,s=n.reject;return{config:r,resolve:a,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){To(n),e.resolve(n)},function(n){e.reject(n)})}function To(e){kn().monaco||vr({monaco:e})}function Nb(){return kn(function(e){var t=e.monaco;return t})}var Ar=new Promise(function(e,t){return vr({resolve:e,reject:t})}),So={config:kb,init:Pb,__getMonacoInstance:Nb},Ob={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ir=Ob,Rb={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Bb=Rb;function Db({children:e}){return wt.createElement("div",{style:Bb.container},e)}var jb=Db,Ub=jb;function Mb({width:e,height:t,isEditorReady:n,loading:r,_ref:a,className:s,wrapperProps:i}){return wt.createElement("section",{style:{...Ir.wrapper,width:e,height:t},...i},!n&&wt.createElement(Ub,null,r),wt.createElement("div",{ref:a,style:{...Ir.fullWidth,...!n&&Ir.hide},className:s}))}var Lb=Mb,ko=L.memo(Lb);function zb(e){L.useEffect(e,[])}var Po=zb;function Fb(e,t,n=!0){let r=L.useRef(!0);L.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var ye=Fb;function Jt(){}function mt(e,t,n,r){return Vb(e,r)||Zb(e,t,n,r)}function Vb(e,t){return e.editor.getModel(Ao(e,t))}function Zb(e,t,n,r){return e.editor.createModel(t,n,r?Ao(e,r):void 0)}function Ao(e,t){return e.Uri.parse(t)}function Gb({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:a,originalModelPath:s,modifiedModelPath:i,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:c=!1,theme:u="light",loading:l="Loading...",options:f={},height:_="100%",width:g="100%",className:b,wrapperProps:S={},beforeMount:I=Jt,onMount:B=Jt}){let[R,z]=L.useState(!1),[M,$]=L.useState(!0),N=L.useRef(null),C=L.useRef(null),W=L.useRef(null),K=L.useRef(B),Z=L.useRef(I),Ne=L.useRef(!1);Po(()=>{let D=So.init();return D.then(J=>(C.current=J)&&$(!1)).catch(J=>(J==null?void 0:J.type)!=="cancelation"&&console.error("Monaco initialization: error:",J)),()=>N.current?Ut():D.cancel()}),ye(()=>{if(N.current&&C.current){let D=N.current.getOriginalEditor(),J=mt(C.current,e||"",r||n||"text",s||"");J!==D.getModel()&&D.setModel(J)}},[s],R),ye(()=>{if(N.current&&C.current){let D=N.current.getModifiedEditor(),J=mt(C.current,t||"",a||n||"text",i||"");J!==D.getModel()&&D.setModel(J)}},[i],R),ye(()=>{let D=N.current.getModifiedEditor();D.getOption(C.current.editor.EditorOption.readOnly)?D.setValue(t||""):t!==D.getValue()&&(D.executeEdits("",[{range:D.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),D.pushUndoStop())},[t],R),ye(()=>{var D,J;(J=(D=N.current)==null?void 0:D.getModel())==null||J.original.setValue(e||"")},[e],R),ye(()=>{let{original:D,modified:J}=N.current.getModel();C.current.editor.setModelLanguage(D,r||n||"text"),C.current.editor.setModelLanguage(J,a||n||"text")},[n,r,a],R),ye(()=>{var D;(D=C.current)==null||D.editor.setTheme(u)},[u],R),ye(()=>{var D;(D=N.current)==null||D.updateOptions(f)},[f],R);let Me=L.useCallback(()=>{var Le;if(!C.current)return;Z.current(C.current);let D=mt(C.current,e||"",r||n||"text",s||""),J=mt(C.current,t||"",a||n||"text",i||"");(Le=N.current)==null||Le.setModel({original:D,modified:J})},[n,t,a,e,r,s,i]),lt=L.useCallback(()=>{var D;!Ne.current&&W.current&&(N.current=C.current.editor.createDiffEditor(W.current,{automaticLayout:!0,...f}),Me(),(D=C.current)==null||D.editor.setTheme(u),z(!0),Ne.current=!0)},[f,u,Me]);L.useEffect(()=>{R&&K.current(N.current,C.current)},[R]),L.useEffect(()=>{!M&&!R&&lt()},[M,R,lt]);function Ut(){var J,Le,ft,Mt;let D=(J=N.current)==null?void 0:J.getModel();o||((Le=D==null?void 0:D.original)==null||Le.dispose()),c||((ft=D==null?void 0:D.modified)==null||ft.dispose()),(Mt=N.current)==null||Mt.dispose()}return wt.createElement(ko,{width:g,height:_,isEditorReady:R,loading:l,_ref:W,className:b,wrapperProps:S})}var qb=Gb;L.memo(qb);function Hb(e){let t=L.useRef();return L.useEffect(()=>{t.current=e},[e]),t.current}var Wb=Hb,Cn=new Map;function Kb({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:a,path:s,theme:i="light",line:o,loading:c="Loading...",options:u={},overrideServices:l={},saveViewState:f=!0,keepCurrentModel:_=!1,width:g="100%",height:b="100%",className:S,wrapperProps:I={},beforeMount:B=Jt,onMount:R=Jt,onChange:z,onValidate:M=Jt}){let[$,N]=L.useState(!1),[C,W]=L.useState(!0),K=L.useRef(null),Z=L.useRef(null),Ne=L.useRef(null),Me=L.useRef(R),lt=L.useRef(B),Ut=L.useRef(),D=L.useRef(r),J=Wb(s),Le=L.useRef(!1),ft=L.useRef(!1);Po(()=>{let q=So.init();return q.then(Q=>(K.current=Q)&&W(!1)).catch(Q=>(Q==null?void 0:Q.type)!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>Z.current?$o():q.cancel()}),ye(()=>{var Q,he,Lt,ht;let q=mt(K.current,e||r||"",t||a||"",s||n||"");q!==((Q=Z.current)==null?void 0:Q.getModel())&&(f&&Cn.set(J,(he=Z.current)==null?void 0:he.saveViewState()),(Lt=Z.current)==null||Lt.setModel(q),f&&((ht=Z.current)==null||ht.restoreViewState(Cn.get(s))))},[s],$),ye(()=>{var q;(q=Z.current)==null||q.updateOptions(u)},[u],$),ye(()=>{!Z.current||r===void 0||(Z.current.getOption(K.current.editor.EditorOption.readOnly)?Z.current.setValue(r):r!==Z.current.getValue()&&(ft.current=!0,Z.current.executeEdits("",[{range:Z.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),Z.current.pushUndoStop(),ft.current=!1))},[r],$),ye(()=>{var Q,he;let q=(Q=Z.current)==null?void 0:Q.getModel();q&&a&&((he=K.current)==null||he.editor.setModelLanguage(q,a))},[a],$),ye(()=>{var q;o!==void 0&&((q=Z.current)==null||q.revealLine(o))},[o],$),ye(()=>{var q;(q=K.current)==null||q.editor.setTheme(i)},[i],$);let Mt=L.useCallback(()=>{var q;if(!(!Ne.current||!K.current)&&!Le.current){lt.current(K.current);let Q=s||n,he=mt(K.current,r||e||"",t||a||"",Q||"");Z.current=(q=K.current)==null?void 0:q.editor.create(Ne.current,{model:he,automaticLayout:!0,...u},l),f&&Z.current.restoreViewState(Cn.get(Q)),K.current.editor.setTheme(i),o!==void 0&&Z.current.revealLine(o),N(!0),Le.current=!0}},[e,t,n,r,a,s,u,l,f,i,o]);L.useEffect(()=>{$&&Me.current(Z.current,K.current)},[$]),L.useEffect(()=>{!C&&!$&&Mt()},[C,$,Mt]),D.current=r,L.useEffect(()=>{var q,Q;$&&z&&((q=Ut.current)==null||q.dispose(),Ut.current=(Q=Z.current)==null?void 0:Q.onDidChangeModelContent(he=>{ft.current||z(Z.current.getValue(),he)}))},[$,z]),L.useEffect(()=>{if($){let q=K.current.editor.onDidChangeMarkers(Q=>{var Lt;let he=(Lt=Z.current.getModel())==null?void 0:Lt.uri;if(he&&Q.find(ht=>ht.path===he.path)){let ht=K.current.editor.getModelMarkers({resource:he});M==null||M(ht)}});return()=>{q==null||q.dispose()}}return()=>{}},[$,M]);function $o(){var q,Q;(q=Ut.current)==null||q.dispose(),_?f&&Cn.set(s,Z.current.saveViewState()):(Q=Z.current.getModel())==null||Q.dispose(),Z.current.dispose()}return wt.createElement(ko,{width:g,height:b,isEditorReady:$,loading:c,_ref:Ne,className:S,wrapperProps:I})}var Jb=Kb,Qb=L.memo(Jb),Xb=Qb;function Yb({value:e}){return ne.jsx(Xb,{theme:"hc-black",options:{readOnly:!0,minimap:{autohide:!0}},defaultValue:e,defaultLanguage:"yaml",onMount:(t,n)=>{n.editor.defineTheme("graph-cli",{base:"hc-black",inherit:!1,rules:[],colors:{"editor.background":"#FFFFFF"}})}})}const As=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"nameHash",type:"bytes32"},{indexed:!1,internalType:"address",name:"contractAddress",type:"address"}],name:"ContractSynced",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_counterpart",type:"address"}],name:"CounterpartGNSAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_l1SubgraphId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_l2SubgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"_l2Curator",type:"address"},{indexed:!1,internalType:"uint256",name:"_tokens",type:"uint256"}],name:"CuratorBalanceReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_l1SubgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"_l2Curator",type:"address"},{indexed:!1,internalType:"uint256",name:"_tokens",type:"uint256"}],name:"CuratorBalanceReturnedToBeneficiary",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"curator",type:"address"},{indexed:!1,internalType:"uint256",name:"nSignalBurnt",type:"uint256"},{indexed:!1,internalType:"uint256",name:"withdrawnGRT",type:"uint256"}],name:"GRTWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"graphAccount",type:"address"},{indexed:!1,internalType:"uint256",name:"subgraphNumber",type:"uint256"}],name:"LegacySubgraphClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"param",type:"string"}],name:"ParameterUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"controller",type:"address"}],name:"SetController",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"graphAccount",type:"address"},{indexed:!1,internalType:"uint256",name:"nameSystem",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"nameIdentifier",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"SetDefaultName",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"curator",type:"address"},{indexed:!1,internalType:"uint256",name:"nSignalBurnt",type:"uint256"},{indexed:!1,internalType:"uint256",name:"vSignalBurnt",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokensReceived",type:"uint256"}],name:"SignalBurned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"curator",type:"address"},{indexed:!1,internalType:"uint256",name:"nSignalCreated",type:"uint256"},{indexed:!1,internalType:"uint256",name:"vSignalCreated",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokensDeposited",type:"uint256"}],name:"SignalMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"nSignalTransferred",type:"uint256"}],name:"SignalTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"withdrawableGRT",type:"uint256"}],name:"SubgraphDeprecated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_l2SubgraphID",type:"uint256"}],name:"SubgraphL2TransferFinalized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"subgraphMetadata",type:"bytes32"}],name:"SubgraphMetadataUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"subgraphNFT",type:"address"}],name:"SubgraphNFTUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"subgraphDeploymentID",type:"bytes32"},{indexed:!1,internalType:"uint32",name:"reserveRatio",type:"uint32"}],name:"SubgraphPublished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_l1SubgraphID",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_l2SubgraphID",type:"uint256"},{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!1,internalType:"uint256",name:"_tokens",type:"uint256"}],name:"SubgraphReceivedFromL1",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"vSignalCreated",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokensSignalled",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"subgraphDeploymentID",type:"bytes32"}],name:"SubgraphUpgraded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"subgraphID",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"subgraphDeploymentID",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"versionMetadata",type:"bytes32"}],name:"SubgraphVersionUpdated",type:"event"},{inputs:[],name:"MAX_ROUNDING_ERROR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SUBGRAPH_ID_ALIAS_OFFSET",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IGraphProxy",name:"_proxy",type:"address"}],name:"acceptProxy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IGraphProxy",name:"_proxy",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"acceptProxyAndCall",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"uint256",name:"_nSignal",type:"uint256"},{internalType:"uint256",name:"_tokensOutMin",type:"uint256"}],name:"burnSignal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"contract IController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"counterpartGNSAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"deprecateSubgraph",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_l2SubgraphID",type:"uint256"},{internalType:"bytes32",name:"_subgraphDeploymentID",type:"bytes32"},{internalType:"bytes32",name:"_subgraphMetadata",type:"bytes32"},{internalType:"bytes32",name:"_versionMetadata",type:"bytes32"}],name:"finishSubgraphTransferFromL1",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_l1SubgraphID",type:"uint256"}],name:"getAliasedL2SubgraphID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"address",name:"_curator",type:"address"}],name:"getCuratorSignal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"getLegacySubgraphKey",outputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"seqID",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_l2SubgraphID",type:"uint256"}],name:"getUnaliasedL1SubgraphID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_controller",type:"address"},{internalType:"address",name:"_subgraphNFT",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"isLegacySubgraph",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"isPublished",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"legacySubgraphData",outputs:[{internalType:"uint256",name:"vSignal",type:"uint256"},{internalType:"uint256",name:"nSignal",type:"uint256"},{internalType:"bytes32",name:"subgraphDeploymentID",type:"bytes32"},{internalType:"uint32",name:"__DEPRECATED_reserveRatio",type:"uint32"},{internalType:"bool",name:"disabled",type:"bool"},{internalType:"uint256",name:"withdrawableGRT",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"legacySubgraphKeys",outputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"accountSeqID",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_graphAccount",type:"address"},{internalType:"uint256",name:"_subgraphNumber",type:"uint256"},{internalType:"bytes32",name:"_subgraphMetadata",type:"bytes32"}],name:"migrateLegacySubgraph",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"uint256",name:"_tokensIn",type:"uint256"},{internalType:"uint256",name:"_nSignalOutMin",type:"uint256"}],name:"mintSignal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"uint256",name:"_nSignalIn",type:"uint256"}],name:"nSignalToTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"uint256",name:"_nSignalIn",type:"uint256"}],name:"nSignalToVSignal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nextAccountSeqID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenID",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerTaxPercentage",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_subgraphDeploymentID",type:"bytes32"},{internalType:"bytes32",name:"_versionMetadata",type:"bytes32"},{internalType:"bytes32",name:"_subgraphMetadata",type:"bytes32"}],name:"publishNewSubgraph",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"bytes32",name:"_subgraphDeploymentID",type:"bytes32"},{internalType:"bytes32",name:"_versionMetadata",type:"bytes32"}],name:"publishNewVersion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_controller",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_counterpart",type:"address"}],name:"setCounterpartGNSAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_graphAccount",type:"address"},{internalType:"uint8",name:"_nameSystem",type:"uint8"},{internalType:"bytes32",name:"_nameIdentifier",type:"bytes32"},{internalType:"string",name:"_name",type:"string"}],name:"setDefaultName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_ownerTaxPercentage",type:"uint32"}],name:"setOwnerTaxPercentage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_subgraphNFT",type:"address"}],name:"setSubgraphNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"subgraphL2TransferData",outputs:[{internalType:"uint256",name:"tokens",type:"uint256"},{internalType:"bool",name:"l2Done",type:"bool"},{internalType:"uint256",name:"subgraphReceivedOnL2BlockNumber",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"subgraphNFT",outputs:[{internalType:"contract ISubgraphNFT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"subgraphSignal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"subgraphTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"subgraphs",outputs:[{internalType:"uint256",name:"vSignal",type:"uint256"},{internalType:"uint256",name:"nSignal",type:"uint256"},{internalType:"bytes32",name:"subgraphDeploymentID",type:"bytes32"},{internalType:"uint32",name:"__DEPRECATED_reserveRatio",type:"uint32"},{internalType:"bool",name:"disabled",type:"bool"},{internalType:"uint256",name:"withdrawableGRT",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"syncAllContracts",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"uint256",name:"_tokensIn",type:"uint256"}],name:"tokensToNSignal",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"transferSignal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"bytes32",name:"_subgraphMetadata",type:"bytes32"}],name:"updateSubgraphMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"},{internalType:"uint256",name:"_vSignalIn",type:"uint256"}],name:"vSignalToNSignal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_subgraphID",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Io=Kc("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),$r=e=>{const t=Io.decode(e).slice(2);return`0x${Buffer.from(t).toString("hex")}`},e0=({description:e,displayName:t,name:n})=>({description:e,image:"ipfs://QmeFs3a4d7kQKuGbV2Ujb5B7ZN8Ph61W5gFfF2mKg2SBtB",subgraphImage:"https://api.thegraph.com/ipfs/api/v0/cat?arg=QmdSeSQ3APFjLktQY3aNVu3M5QXPfE9ZRK5LqgghRgB7L9",displayName:t,name:n,codeRepository:null,website:null,categories:null}),Jr=Zg({url:"https://api.thegraph.com/ipfs/api/v0"});async function Is(e){try{const n=Jr.addAll([e])[Symbol.asyncIterator](),{value:r}=await n.next(),a=r;return await Jr.pin.add(a.cid),a.cid.toString()}catch(t){throw Error(`Failed to upload file to IPFS: ${(t==null?void 0:t.message)||t}`)}}async function t0(e){const t=Jr.cat(e),n=[];for await(const r of t)n.push(r);return Buffer.concat(n).toString("utf-8")}const n0=e=>Io.encode(bc(vc(BigInt(e)))),r0=({chainId:e,account:t,seqId:n})=>e?BigInt(Ca(Oa(["address","uint256","uint256"],[t,n,BigInt(e)]))).toString():BigInt(Ca(Oa(["address","uint256"],[t,n]))).toString();function a0({deploymentId:e}){const{data:t,writeContract:n,isPending:r}=qc({}),{address:a,chainId:s}=gc(),{data:i}=wc({queryKey:["subgraph-manifest",e],queryFn:()=>t0(e)});console.log(i);const{data:o}=Gc({abi:As,address:"0x3133948342F35b8699d8F94aeE064AbB76eDe965",functionName:"nextAccountSeqID",args:["0x6f5ccd3e078ba48291dfb491cce18f348f6f5c00"]});async function c(){const u=$r(e),l=await Is({path:"",content:Buffer.from(JSON.stringify({label:"0.0.3",description:null}))}),f=await Is({path:"",content:Buffer.from(JSON.stringify(e0({description:"A subgraph for the Graph Network",displayName:"test Subgraph 1",name:"graph-network-subgraph"})))});n({address:"0x3133948342F35b8699d8F94aeE064AbB76eDe965",abi:As,functionName:"publishNewSubgraph",args:[u,$r(l),$r(f)]})}return ne.jsxs("div",{className:"flex px-4 lg:px-6 h-auto py-2",children:[ne.jsx("div",{className:"w-1/2",children:ne.jsxs("form",{onSubmit:async u=>{u.preventDefault(),await c()},children:[ne.jsx("button",{disabled:r,type:"submit",children:r?"Confirming...":"Deploy"}),t?ne.jsxs("div",{children:["Transaction Hash: ",t]}):null,o&&a&&s?ne.jsxs("div",{children:["Next Account Seq ID: https://testnet.thegraph.com/explorer/subgraphs/",n0(r0({account:a,seqId:o-1n,chainId:s}))]}):null]})}),ne.jsxs("div",{className:"w-1/2 h-[calc(100vh_-_8rem)]",children:[ne.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"Subgraph Manifest"}),i?ne.jsx(Yb,{value:i}):null]})]})}function s0(){const{id:e}=i0.useSearch();return ne.jsxs("div",{className:"min-h-screen",children:[ne.jsxs("nav",{className:"flex h-14 items-center border-b lg:h-[60px] justify-between  px-4 lg:px-6",children:[ne.jsx("img",{src:"/the-graph-logomark-light.png",alt:"logo",className:"h-8"}),ne.jsx(mc,{})]}),e?ne.jsx(a0,{deploymentId:e}):ne.jsx("div",{className:"flex justify-center items-center min-h-screen -mt-16",children:"Unable to find the Deployment ID. Go back to CLI"})]})}const i0=yc("/deploy")({component:s0,validateSearch:_s.object({id:_s.string()})});export{i0 as Route};
